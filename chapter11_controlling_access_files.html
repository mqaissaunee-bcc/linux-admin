<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 11: Controlling Access to Files | RH124</title>
    <style>
        /* ==================== CSS VARIABLES ==================== */
        :root {
            --rh-red: #CC0000;
            --rh-red-dark: #990000;
            --rh-red-light: #FF3333;
            --rh-black: #1A1A1A;
            --rh-gray-dark: #333333;
            --rh-gray: #666666;
            --rh-gray-light: #CCCCCC;
            --rh-gray-lighter: #F0F0F0;
            --rh-white: #FFFFFF;
            --rh-blue: #0066CC;
            --rh-blue-dark: #004C99;
            --rh-teal: #009999;
            --rh-gold: #CC9900;
            --rh-green: #339933;
            --rh-green-dark: #267326;
            --rh-purple: #663399;
            --rh-orange: #FF6600;
            
            --font-display: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            --font-body: Georgia, 'Times New Roman', serif;
            --font-mono: 'Consolas', 'Courier New', monospace;
            
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.2);
            
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 16px;
            
            --transition-fast: 0.2s ease;
            --transition-med: 0.3s ease;
        }

        /* ==================== RESET & BASE ==================== */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-body);
            background: linear-gradient(135deg, var(--rh-gray-lighter) 0%, var(--rh-white) 50%, var(--rh-gray-lighter) 100%);
            color: var(--rh-black);
            line-height: 1.7;
            min-height: 100vh;
        }

        /* ==================== ACCESSIBILITY ==================== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        *:focus {
            outline: 3px solid var(--rh-blue);
            outline-offset: 2px;
        }

        *:focus:not(:focus-visible) {
            outline: none;
        }

        *:focus-visible {
            outline: 3px solid var(--rh-blue);
            outline-offset: 2px;
        }

        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--rh-red);
            color: var(--rh-white);
            padding: 12px 24px;
            text-decoration: none;
            font-family: var(--font-display);
            font-weight: 600;
            border-radius: var(--radius-md);
            z-index: 10000;
            transition: top var(--transition-fast);
        }

        .skip-link:focus {
            top: 10px;
        }

        @media (prefers-contrast: high) {
            :root {
                --rh-gray-light: #888888;
                --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            html {
                scroll-behavior: auto;
            }
        }

        /* ==================== HEADER ==================== */
        .main-header {
            background: linear-gradient(135deg, var(--rh-black) 0%, var(--rh-gray-dark) 100%);
            color: var(--rh-white);
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .main-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--rh-red);
        }

        .main-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
        }

        .course-badge {
            display: inline-block;
            background: var(--rh-red);
            color: var(--rh-white);
            padding: 8px 20px;
            border-radius: 50px;
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 0.9rem;
            letter-spacing: 1px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
        }

        .main-header h1 {
            font-family: var(--font-display);
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .chapter-subtitle {
            font-size: 1.1rem;
            color: var(--rh-gray-light);
            max-width: 600px;
            margin: 0 auto;
        }

        /* ==================== NAVIGATION ==================== */
        .section-nav {
            background: var(--rh-white);
            border-bottom: 1px solid var(--rh-gray-light);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .nav-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-btn {
            padding: 10px 16px;
            background: var(--rh-gray-lighter);
            color: var(--rh-gray-dark);
            text-decoration: none;
            border-radius: var(--radius-sm);
            font-family: var(--font-display);
            font-size: 0.85rem;
            font-weight: 600;
            transition: all var(--transition-fast);
            border: 2px solid transparent;
        }

        .nav-btn:hover {
            background: var(--rh-blue);
            color: var(--rh-white);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: var(--rh-red);
            color: var(--rh-white);
        }

        .nav-btn.visited {
            border-color: var(--rh-green);
        }

        /* ==================== PROGRESS BAR ==================== */
        .progress-container {
            background: var(--rh-white);
            padding: 15px 20px;
            border-bottom: 1px solid var(--rh-gray-light);
        }

        .progress-inner {
            max-width: 800px;
            margin: 0 auto;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-family: var(--font-display);
            font-size: 0.85rem;
            color: var(--rh-gray);
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 8px;
            background: var(--rh-gray-lighter);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--rh-green) 0%, var(--rh-teal) 100%);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* ==================== MAIN CONTENT ==================== */
        .main-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .content-section {
            background: var(--rh-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: 40px;
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, var(--rh-gray-dark) 0%, var(--rh-black) 100%);
            color: var(--rh-white);
            padding: 25px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .section-number {
            background: var(--rh-red);
            color: var(--rh-white);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-header h2 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
        }

        .section-body {
            padding: 30px;
        }

        .section-body p {
            margin-bottom: 20px;
        }

        .section-body h3 {
            font-family: var(--font-display);
            color: var(--rh-gray-dark);
            font-size: 1.3rem;
            margin: 30px 0 15px;
        }

        .section-body h4 {
            font-family: var(--font-display);
            color: var(--rh-gray-dark);
            font-size: 1.1rem;
            margin: 20px 0 10px;
        }

        /* ==================== OBJECTIVES BOX ==================== */
        .objectives-box {
            background: linear-gradient(135deg, #E6FFE6 0%, #CCFFCC 100%);
            border: 2px solid var(--rh-green);
            border-radius: var(--radius-md);
            padding: 25px;
        }

        .objectives-box h3 {
            font-family: var(--font-display);
            color: var(--rh-green-dark);
            margin-bottom: 15px;
            margin-top: 0;
        }

        .objectives-list {
            list-style: none;
            padding: 0;
        }

        .objectives-list li {
            position: relative;
            padding-left: 35px;
            margin-bottom: 12px;
        }

        .objectives-list li::before {
            content: 'âœ“';
            position: absolute;
            left: 0;
            color: var(--rh-green);
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* ==================== INLINE CODE ==================== */
        code.inline {
            background: var(--rh-gray-lighter);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            font-family: var(--font-mono);
            font-size: 0.9em;
            color: var(--rh-red-dark);
        }

        /* ==================== TOOLTIP SYSTEM ==================== */
        .tooltip-container {
            position: relative;
            display: inline;
        }

        .tooltip-trigger {
            border: none;
            background: none;
            padding: 0;
            font: inherit;
            color: var(--rh-blue);
            border-bottom: 2px dotted var(--rh-blue);
            cursor: help;
        }

        .tooltip-content {
            position: absolute;
            bottom: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--rh-gray-dark);
            color: var(--rh-white);
            padding: 12px 16px;
            border-radius: var(--radius-md);
            font-family: var(--font-display);
            font-size: 0.85rem;
            width: 280px;
            max-width: 90vw;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-fast);
            z-index: 1000;
            box-shadow: var(--shadow-lg);
            line-height: 1.5;
            text-align: left;
        }

        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: var(--rh-gray-dark);
        }

        .tooltip-trigger:hover + .tooltip-content,
        .tooltip-trigger:focus + .tooltip-content {
            opacity: 1;
            visibility: visible;
        }

        .tooltip-content.tooltip-left {
            left: 0;
            transform: translateX(0);
        }

        .tooltip-content.tooltip-left::after {
            left: 20px;
            transform: translateX(0);
        }

        .tooltip-content.tooltip-right {
            left: auto;
            right: 0;
            transform: translateX(0);
        }

        .tooltip-content.tooltip-right::after {
            left: auto;
            right: 20px;
            transform: translateX(0);
        }

        .tooltip-content.tooltip-bottom {
            bottom: auto;
            top: calc(100% + 10px);
        }

        .tooltip-content.tooltip-bottom::after {
            top: auto;
            bottom: 100%;
            border-top-color: transparent;
            border-bottom-color: var(--rh-gray-dark);
        }

        /* ==================== TABS ==================== */
        .tabs-container {
            margin: 25px 0;
        }

        .tab-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            border-bottom: 2px solid var(--rh-gray-light);
            padding-bottom: 0;
        }

        .tab-btn {
            padding: 12px 20px;
            background: var(--rh-gray-lighter);
            border: none;
            border-radius: var(--radius-md) var(--radius-md) 0 0;
            font-family: var(--font-display);
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--rh-gray);
            cursor: pointer;
            transition: all var(--transition-fast);
            min-width: 100px;
        }

        .tab-btn:hover {
            background: var(--rh-blue);
            color: var(--rh-white);
        }

        .tab-btn[aria-selected="true"] {
            background: var(--rh-red);
            color: var(--rh-white);
        }

        .tab-content {
            display: none;
            padding: 25px;
            background: var(--rh-gray-lighter);
            border-radius: 0 0 var(--radius-md) var(--radius-md);
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h4 {
            margin-top: 0;
        }

        /* ==================== CODE BLOCKS ==================== */
        .code-block {
            background: var(--rh-black);
            color: #00FF00;
            padding: 20px;
            border-radius: var(--radius-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 20px 0;
            position: relative;
        }

        .code-block code {
            display: block;
            white-space: pre;
        }

        .code-block .code-comment {
            color: #888888;
        }

        .code-block .code-prompt {
            color: #00FFFF;
        }

        .code-block .code-command {
            color: #FFFF00;
        }

        .code-block .code-output {
            color: #FFFFFF;
        }

        .code-block .code-error {
            color: #FF6666;
        }

        .code-block .code-file {
            color: #99FF99;
        }

        .code-block .code-highlight {
            color: #FF99FF;
        }

        .code-title {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--rh-gray-dark);
            color: var(--rh-gray-light);
            padding: 5px 15px;
            border-radius: 0 var(--radius-md) 0 var(--radius-md);
            font-family: var(--font-display);
            font-size: 0.75rem;
        }

        /* ==================== NOTE BOXES ==================== */
        .note-box {
            background: linear-gradient(135deg, #FFF9E6 0%, #FFF0CC 100%);
            border: 2px solid var(--rh-gold);
            border-radius: var(--radius-md);
            padding: 20px;
            margin: 25px 0;
        }

        .note-box-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-gray-dark);
            margin-bottom: 10px;
        }

        .note-icon {
            font-size: 1.2rem;
        }

        .warning-box {
            background: linear-gradient(135deg, #FFF0F0 0%, #FFE0E0 100%);
            border: 2px solid var(--rh-red);
            border-radius: var(--radius-md);
            padding: 20px;
            margin: 25px 0;
        }

        .warning-box-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-red-dark);
            margin-bottom: 10px;
        }

        .info-box {
            background: linear-gradient(135deg, #E6F0FF 0%, #CCE5FF 100%);
            border: 2px solid var(--rh-blue);
            border-radius: var(--radius-md);
            padding: 20px;
            margin: 25px 0;
        }

        .info-box-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-blue-dark);
            margin-bottom: 10px;
        }

        /* ==================== KEY POINTS ==================== */
        .key-points {
            background: linear-gradient(135deg, #E6F0FF 0%, #CCE5FF 100%);
            border-left: 4px solid var(--rh-blue);
            padding: 25px;
            border-radius: var(--radius-md);
            margin: 25px 0;
        }

        .key-points h4 {
            font-family: var(--font-display);
            color: var(--rh-blue-dark);
            margin-bottom: 15px;
            font-size: 1.1rem;
            margin-top: 0;
        }

        .key-points ul {
            list-style: disc;
            padding-left: 20px;
        }

        .key-points li {
            margin-bottom: 8px;
        }

        /* ==================== COMPARISON TABLE ==================== */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-family: var(--font-display);
            font-size: 0.95rem;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border: 1px solid var(--rh-gray-light);
        }

        .comparison-table th {
            background: var(--rh-gray-dark);
            color: var(--rh-white);
            font-weight: 600;
        }

        .comparison-table tr:nth-child(even) {
            background: var(--rh-gray-lighter);
        }

        .comparison-table tr:hover {
            background: #E6F0FF;
        }

        /* ==================== PERMISSION DIAGRAM ==================== */
        .perm-diagram {
            background: var(--rh-gray-lighter);
            border: 2px solid var(--rh-gray-light);
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }

        .perm-diagram-title {
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-gray-dark);
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .perm-string {
            font-family: var(--font-mono);
            font-size: 1.8rem;
            letter-spacing: 2px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .perm-char {
            display: inline-block;
            padding: 10px 12px;
            border-radius: var(--radius-sm);
            min-width: 45px;
            text-align: center;
            font-weight: 700;
        }

        .perm-type {
            background: var(--rh-purple);
            color: var(--rh-white);
        }

        .perm-user {
            background: var(--rh-red);
            color: var(--rh-white);
        }

        .perm-group {
            background: var(--rh-blue);
            color: var(--rh-white);
        }

        .perm-other {
            background: var(--rh-teal);
            color: var(--rh-white);
        }

        .perm-labels {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .perm-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-display);
            font-size: 0.85rem;
        }

        .perm-label-color {
            width: 20px;
            height: 20px;
            border-radius: var(--radius-sm);
        }

        /* ==================== INTERACTIVE PERMISSION CALCULATOR ==================== */
        .perm-calculator {
            background: linear-gradient(135deg, #F0E6FF 0%, #E6D9FF 100%);
            border: 2px solid var(--rh-purple);
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
        }

        .perm-calc-title {
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-purple);
            margin-bottom: 20px;
            font-size: 1.2rem;
            text-align: center;
        }

        .perm-calc-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .perm-calc-col {
            text-align: center;
        }

        .perm-calc-header {
            font-family: var(--font-display);
            font-weight: 700;
            padding: 10px;
            border-radius: var(--radius-sm);
            margin-bottom: 10px;
        }

        .perm-calc-header.user-header {
            background: var(--rh-red);
            color: var(--rh-white);
        }

        .perm-calc-header.group-header {
            background: var(--rh-blue);
            color: var(--rh-white);
        }

        .perm-calc-header.other-header {
            background: var(--rh-teal);
            color: var(--rh-white);
        }

        .perm-calc-header.result-header {
            background: var(--rh-purple);
            color: var(--rh-white);
        }

        .perm-checkbox {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 8px;
            background: var(--rh-white);
            border-radius: var(--radius-sm);
            margin-bottom: 5px;
            font-family: var(--font-display);
            font-size: 0.9rem;
        }

        .perm-checkbox input {
            width: 18px;
            height: 18px;
        }

        .perm-result {
            background: var(--rh-black);
            color: #00FF00;
            padding: 15px;
            border-radius: var(--radius-md);
            font-family: var(--font-mono);
            font-size: 1.3rem;
            text-align: center;
        }

        .perm-result-label {
            font-family: var(--font-display);
            font-size: 0.85rem;
            color: var(--rh-gray);
            margin-top: 10px;
        }

        /* ==================== EXPANDABLE SECTIONS ==================== */
        .expandable {
            margin: 15px 0;
            border: 1px solid var(--rh-gray-light);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .expandable-header {
            width: 100%;
            padding: 15px 20px;
            background: var(--rh-gray-lighter);
            border: none;
            text-align: left;
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 600;
            color: var(--rh-gray-dark);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background var(--transition-fast);
        }

        .expandable-header:hover {
            background: var(--rh-blue);
            color: var(--rh-white);
        }

        .expand-icon {
            transition: transform var(--transition-fast);
        }

        .expandable-header[aria-expanded="true"] .expand-icon {
            transform: rotate(180deg);
        }

        .expandable-content {
            display: none;
            padding: 20px;
            background: var(--rh-white);
        }

        .expandable-content.active {
            display: block;
        }

        /* ==================== QUIZ STYLES ==================== */
        .quiz-container {
            background: var(--rh-gray-lighter);
            border-radius: var(--radius-md);
            padding: 25px;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .quiz-title {
            font-family: var(--font-display);
            font-size: 1.3rem;
            color: var(--rh-gray-dark);
        }

        .quiz-score {
            background: var(--rh-blue);
            color: var(--rh-white);
            padding: 8px 16px;
            border-radius: var(--radius-md);
            font-family: var(--font-display);
            font-weight: 600;
        }

        .quiz-question {
            background: var(--rh-white);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }

        .question-text {
            font-family: var(--font-display);
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--rh-gray-dark);
        }

        .question-number {
            background: var(--rh-red);
            color: var(--rh-white);
            padding: 3px 10px;
            border-radius: var(--radius-sm);
            margin-right: 10px;
            font-size: 0.85rem;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: var(--rh-gray-lighter);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-family: var(--font-display);
        }

        .quiz-option:hover {
            background: var(--rh-blue);
            color: var(--rh-white);
        }

        .quiz-option input {
            margin-right: 12px;
            width: 18px;
            height: 18px;
        }

        .quiz-option.correct {
            background: var(--rh-green);
            color: var(--rh-white);
        }

        .quiz-option.incorrect {
            background: var(--rh-red);
            color: var(--rh-white);
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 12px;
            border-radius: var(--radius-sm);
            font-family: var(--font-display);
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: #E6FFE6;
            color: var(--rh-green-dark);
            border: 1px solid var(--rh-green);
        }

        .quiz-feedback.incorrect {
            background: #FFF0F0;
            color: var(--rh-red-dark);
            border: 1px solid var(--rh-red);
        }

        .quiz-btn {
            background: var(--rh-red);
            color: var(--rh-white);
            padding: 12px 30px;
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-top: 20px;
        }

        .quiz-btn:hover {
            background: var(--rh-red-dark);
            transform: translateY(-2px);
        }

        /* ==================== LAB STYLES ==================== */
        .lab-container {
            background: linear-gradient(135deg, #F0E6FF 0%, #E6D9FF 100%);
            border: 2px solid var(--rh-purple);
            border-radius: var(--radius-md);
            padding: 25px;
        }

        .lab-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .lab-icon {
            font-size: 2rem;
        }

        .lab-title {
            font-family: var(--font-display);
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--rh-purple);
        }

        .lab-step {
            background: var(--rh-white);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 15px;
        }

        .step-number {
            display: inline-block;
            background: var(--rh-purple);
            color: var(--rh-white);
            padding: 4px 12px;
            border-radius: var(--radius-sm);
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 0.85rem;
            margin-right: 10px;
        }

        /* ==================== SUMMARY BOX ==================== */
        .summary-box {
            background: linear-gradient(135deg, #E6FFE6 0%, #CCFFCC 100%);
            border: 2px solid var(--rh-green);
            border-radius: var(--radius-md);
            padding: 25px;
        }

        .summary-box h3 {
            font-family: var(--font-display);
            color: var(--rh-green-dark);
            margin-bottom: 15px;
        }

        .summary-list {
            list-style: none;
            padding: 0;
        }

        .summary-list li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 12px;
        }

        .summary-list li::before {
            content: 'â€¢';
            position: absolute;
            left: 0;
            color: var(--rh-green);
            font-weight: bold;
            font-size: 1.5rem;
            line-height: 1;
        }

        /* ==================== COMPLETION SECTION ==================== */
        .completion-section {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, var(--rh-gray-lighter) 0%, var(--rh-white) 100%);
            border-radius: var(--radius-md);
            margin-top: 30px;
        }

        .completion-section h2 {
            font-family: var(--font-display);
            color: var(--rh-gray-dark);
            margin-bottom: 15px;
        }

        .completion-btn {
            background: linear-gradient(135deg, var(--rh-green) 0%, var(--rh-green-dark) 100%);
            color: var(--rh-white);
            padding: 15px 40px;
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-md);
        }

        .completion-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        /* ==================== FOOTER ==================== */
        .main-footer {
            background: var(--rh-black);
            color: var(--rh-gray-light);
            text-align: center;
            padding: 30px 20px;
            font-family: var(--font-display);
            font-size: 0.9rem;
        }

        /* ==================== SPECIAL PERMISSIONS DIAGRAM ==================== */
        .special-perm-diagram {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .special-perm-card {
            background: var(--rh-white);
            border: 2px solid var(--rh-gray-light);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
            transition: all var(--transition-fast);
        }

        .special-perm-card:hover {
            border-color: var(--rh-blue);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .special-perm-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .special-perm-name {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--rh-gray-dark);
            margin-bottom: 10px;
        }

        .special-perm-code {
            font-family: var(--font-mono);
            background: var(--rh-gray-lighter);
            padding: 5px 15px;
            border-radius: var(--radius-sm);
            display: inline-block;
            margin-bottom: 10px;
        }

        .special-perm-desc {
            font-size: 0.95rem;
            color: var(--rh-gray);
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 768px) {
            .perm-calc-grid {
                grid-template-columns: 1fr;
            }
            
            .perm-string {
                font-size: 1.3rem;
            }
            
            .perm-char {
                padding: 8px 10px;
                min-width: 35px;
            }
            
            .nav-btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header class="main-header" role="banner">
        <div class="header-content">
            <span class="course-badge">RH124 â€¢ CHAPTER 11</span>
            <h1>Controlling Access to Files</h1>
            <p class="chapter-subtitle">Master Linux file permissions, ownership, and access control to secure your systems</p>
        </div>
    </header>

    <!-- Section Navigation -->
    <nav class="section-nav" aria-label="Chapter sections">
        <div class="nav-container">
            <a href="#section-objectives" class="nav-btn">Objectives</a>
            <a href="#section-permissions" class="nav-btn">Permissions</a>
            <a href="#section-viewing" class="nav-btn">Viewing</a>
            <a href="#section-chmod" class="nav-btn">chmod</a>
            <a href="#section-ownership" class="nav-btn">Ownership</a>
            <a href="#section-umask" class="nav-btn">umask</a>
            <a href="#section-special" class="nav-btn">Special</a>
            <a href="#section-quiz" class="nav-btn">Quiz</a>
            <a href="#section-lab" class="nav-btn">Lab</a>
            <a href="#section-summary" class="nav-btn">Summary</a>
        </div>
    </nav>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-inner">
            <div class="progress-label">
                <span>Chapter Progress</span>
                <span id="progress-percent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content" id="main-content">
        
        <!-- Section 1: Learning Objectives -->
        <section id="section-objectives" class="content-section" aria-labelledby="objectives-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">1</span>
                <h2 id="objectives-heading">Learning Objectives</h2>
            </div>
            <div class="section-body">
                <div class="objectives-box">
                    <h3>ðŸŽ¯ After completing this chapter, you will be able to:</h3>
                    <ul class="objectives-list">
                        <li>Explain how Linux file permissions protect files and directories</li>
                        <li>Interpret permission strings displayed by <code class="inline">ls -l</code></li>
                        <li>Change file and directory permissions using <code class="inline">chmod</code> with symbolic and octal methods</li>
                        <li>Change file ownership and group ownership using <code class="inline">chown</code> and <code class="inline">chgrp</code></li>
                        <li>Understand and configure default permissions using <code class="inline">umask</code></li>
                        <li>Configure and use special permissions: SUID, SGID, and sticky bit</li>
                    </ul>
                </div>

                <p>File permissions are a fundamental security mechanism in Linux. Every file and directory has an owner, a group, and a set of permission bits that determine who can read, write, or execute the file. Understanding how to manage these permissions is essential for maintaining system security.</p>

                <div class="info-box">
                    <div class="info-box-header">
                        <span class="note-icon" aria-hidden="true">ðŸ“˜</span>
                        <span>Why File Permissions Matter</span>
                    </div>
                    <p>Without proper permissions, sensitive files could be read by unauthorized users, system files could be modified or deleted by anyone, and malicious scripts could be executed. Linux file permissions provide a simple but effective access control system.</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Understanding Linux File Permissions -->
        <section id="section-permissions" class="content-section" aria-labelledby="permissions-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">2</span>
                <h2 id="permissions-heading">Understanding Linux File Permissions</h2>
            </div>
            <div class="section-body">
                <p>Every file and directory in Linux has three types of permissions assigned to three categories of users. This creates a simple but powerful access control matrix.</p>

                <h3>Permission Categories</h3>
                <p>Permissions are assigned to three distinct categories:</p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Symbol</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>User (Owner)</strong></td>
                            <td><code class="inline">u</code></td>
                            <td>The user who owns the file</td>
                        </tr>
                        <tr>
                            <td><strong>Group</strong></td>
                            <td><code class="inline">g</code></td>
                            <td>Members of the file's group</td>
                        </tr>
                        <tr>
                            <td><strong>Other (World)</strong></td>
                            <td><code class="inline">o</code></td>
                            <td>Everyone else on the system</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Permission Types</h3>
                <p>Each category can have three types of permissions:</p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Permission</th>
                            <th>Symbol</th>
                            <th>Octal</th>
                            <th>Effect on Files</th>
                            <th>Effect on Directories</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Read</strong></td>
                            <td><code class="inline">r</code></td>
                            <td>4</td>
                            <td>View file contents</td>
                            <td>List directory contents (<code class="inline">ls</code>)</td>
                        </tr>
                        <tr>
                            <td><strong>Write</strong></td>
                            <td><code class="inline">w</code></td>
                            <td>2</td>
                            <td>Modify file contents</td>
                            <td>Create, delete, rename files in directory</td>
                        </tr>
                        <tr>
                            <td><strong>Execute</strong></td>
                            <td><code class="inline">x</code></td>
                            <td>1</td>
                            <td>Run as a program/script</td>
                            <td>Enter directory (<code class="inline">cd</code>), access contents</td>
                        </tr>
                    </tbody>
                </table>

                <div class="note-box">
                    <div class="note-box-header">
                        <span class="note-icon" aria-hidden="true">ðŸ’¡</span>
                        <span>Directory Permission Quirks</span>
                    </div>
                    <p>Directory permissions work differently than file permissions. To access a file inside a directory, you need <strong>execute</strong> permission on the directory. Read permission lets you list contents, but without execute, you can't actually access the files. Write permission allows creating and deleting files within the directory.</p>
                </div>

                <h3>The Permission String</h3>
                <p>Permissions are displayed as a 10-character string when you use <code class="inline">ls -l</code>:</p>

                <div class="perm-diagram">
                    <div class="perm-diagram-title">Anatomy of a Permission String</div>
                    <div class="perm-string" role="img" aria-label="Permission string drwxr-xr-x broken down by component">
                        <span class="perm-char perm-type">d</span>
                        <span class="perm-char perm-user">r</span>
                        <span class="perm-char perm-user">w</span>
                        <span class="perm-char perm-user">x</span>
                        <span class="perm-char perm-group">r</span>
                        <span class="perm-char perm-group">-</span>
                        <span class="perm-char perm-group">x</span>
                        <span class="perm-char perm-other">r</span>
                        <span class="perm-char perm-other">-</span>
                        <span class="perm-char perm-other">x</span>
                    </div>
                    <div class="perm-labels">
                        <span class="perm-label"><span class="perm-label-color" style="background: var(--rh-purple);"></span> File Type</span>
                        <span class="perm-label"><span class="perm-label-color" style="background: var(--rh-red);"></span> User (Owner)</span>
                        <span class="perm-label"><span class="perm-label-color" style="background: var(--rh-blue);"></span> Group</span>
                        <span class="perm-label"><span class="perm-label-color" style="background: var(--rh-teal);"></span> Other</span>
                    </div>
                </div>

                <h3>File Type Characters</h3>
                <p>The first character indicates the file type:</p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Character</th>
                            <th>File Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline">-</code></td>
                            <td>Regular file</td>
                        </tr>
                        <tr>
                            <td><code class="inline">d</code></td>
                            <td>Directory</td>
                        </tr>
                        <tr>
                            <td><code class="inline">l</code></td>
                            <td>Symbolic link</td>
                        </tr>
                        <tr>
                            <td><code class="inline">c</code></td>
                            <td>Character device</td>
                        </tr>
                        <tr>
                            <td><code class="inline">b</code></td>
                            <td>Block device</td>
                        </tr>
                        <tr>
                            <td><code class="inline">s</code></td>
                            <td>Socket</td>
                        </tr>
                        <tr>
                            <td><code class="inline">p</code></td>
                            <td>Named pipe (FIFO)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 3: Viewing File Permissions -->
        <section id="section-viewing" class="content-section" aria-labelledby="viewing-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">3</span>
                <h2 id="viewing-heading">Viewing File Permissions</h2>
            </div>
            <div class="section-body">
                <p>The <code class="inline">ls -l</code> command displays detailed file information including permissions, ownership, and timestamps.</p>

                <div class="code-block">
                    <span class="code-title">ls -l Output</span>
                    <code><span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">ls -l</span>
<span class="code-output">-rw-r--r--. 1 student student  1234 Jan 15 10:30 document.txt</span>
<span class="code-output">-rwxr-xr-x. 1 student student  5678 Jan 15 09:00 script.sh</span>
<span class="code-output">drwxr-xr-x. 2 student student  4096 Jan 14 14:00 projects</span>
<span class="code-output">lrwxrwxrwx. 1 student student    12 Jan 10 08:00 link -> document.txt</span></code>
                </div>

                <h3>Understanding the Output</h3>
                <p>Each line shows:</p>

                <div class="expandable">
                    <button class="expandable-header" aria-expanded="false" aria-controls="ls-field-1">
                        <span>Field 1: File Type and Permissions</span>
                        <span class="expand-icon" aria-hidden="true">â–¼</span>
                    </button>
                    <div id="ls-field-1" class="expandable-content">
                        <p>The first 10 characters show file type (1 char) and permissions (9 chars).</p>
                        <p>Example: <code class="inline">-rw-r--r--</code> means:</p>
                        <ul style="margin-left: 20px;">
                            <li><code class="inline">-</code> : Regular file</li>
                            <li><code class="inline">rw-</code> : Owner can read and write</li>
                            <li><code class="inline">r--</code> : Group can read only</li>
                            <li><code class="inline">r--</code> : Others can read only</li>
                        </ul>
                    </div>
                </div>

                <div class="expandable">
                    <button class="expandable-header" aria-expanded="false" aria-controls="ls-field-2">
                        <span>Field 2: Link Count</span>
                        <span class="expand-icon" aria-hidden="true">â–¼</span>
                    </button>
                    <div id="ls-field-2" class="expandable-content">
                        <p>Number of hard links pointing to this file. For directories, this includes <code class="inline">.</code> and <code class="inline">..</code> plus any subdirectories.</p>
                    </div>
                </div>

                <div class="expandable">
                    <button class="expandable-header" aria-expanded="false" aria-controls="ls-field-3">
                        <span>Field 3 &amp; 4: Owner and Group</span>
                        <span class="expand-icon" aria-hidden="true">â–¼</span>
                    </button>
                    <div id="ls-field-3" class="expandable-content">
                        <p>The username of the file's owner and the group name. These determine which permission set applies to a given user.</p>
                    </div>
                </div>

                <div class="expandable">
                    <button class="expandable-header" aria-expanded="false" aria-controls="ls-field-4">
                        <span>Field 5: Size</span>
                        <span class="expand-icon" aria-hidden="true">â–¼</span>
                    </button>
                    <div id="ls-field-4" class="expandable-content">
                        <p>File size in bytes. Use <code class="inline">ls -lh</code> for human-readable sizes (KB, MB, GB).</p>
                    </div>
                </div>

                <div class="expandable">
                    <button class="expandable-header" aria-expanded="false" aria-controls="ls-field-5">
                        <span>Field 6: Modification Time</span>
                        <span class="expand-icon" aria-hidden="true">â–¼</span>
                    </button>
                    <div id="ls-field-5" class="expandable-content">
                        <p>When the file was last modified. Shows date and time, or year for older files.</p>
                    </div>
                </div>

                <div class="expandable">
                    <button class="expandable-header" aria-expanded="false" aria-controls="ls-field-6">
                        <span>Field 7: Filename</span>
                        <span class="expand-icon" aria-hidden="true">â–¼</span>
                    </button>
                    <div id="ls-field-6" class="expandable-content">
                        <p>The name of the file or directory. For symbolic links, shows the target.</p>
                    </div>
                </div>

                <h3>Additional Viewing Commands</h3>
                <div class="code-block">
                    <span class="code-title">Other Useful Commands</span>
                    <code><span class="code-comment"># Show hidden files</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">ls -la</span>

<span class="code-comment"># Show permissions in octal format</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">stat document.txt</span>
<span class="code-output">  File: document.txt</span>
<span class="code-output">  Size: 1234      	Blocks: 8          IO Block: 4096   regular file</span>
<span class="code-output">Access: (0644/-rw-r--r--)  Uid: ( 1000/ student)   Gid: ( 1000/ student)</span>
<span class="code-output">...</span>

<span class="code-comment"># Show only permissions</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">stat -c '%A %n' *</span>
<span class="code-output">-rw-r--r-- document.txt</span>
<span class="code-output">-rwxr-xr-x script.sh</span>
<span class="code-output">drwxr-xr-x projects</span></code>
                </div>
            </div>
        </section>

        <!-- Section 4: Changing Permissions with chmod -->
        <section id="section-chmod" class="content-section" aria-labelledby="chmod-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">4</span>
                <h2 id="chmod-heading">Changing Permissions with chmod</h2>
            </div>
            <div class="section-body">
                <p>The 
                    <span class="tooltip-container">
                        <button type="button" class="tooltip-trigger" aria-describedby="tooltip-chmod">chmod</button>
                        <span class="tooltip-content" id="tooltip-chmod" role="tooltip">chmod (change mode) modifies the permission bits of files and directories. Only the owner or root can change a file's permissions.</span>
                    </span> command changes file permissions. There are two methods: symbolic and octal (numeric).</p>

                <div class="tabs-container">
                    <div class="tab-list" role="tablist" aria-label="chmod methods">
                        <button class="tab-btn" role="tab" aria-selected="true" aria-controls="tab-symbolic" id="tab-btn-symbolic">Symbolic Method</button>
                        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-octal" id="tab-btn-octal">Octal Method</button>
                    </div>
                    
                    <div id="tab-symbolic" class="tab-content active" role="tabpanel" aria-labelledby="tab-btn-symbolic">
                        <h4>Symbolic Method</h4>
                        <p>Uses letters and symbols to specify changes. Format: <code class="inline">chmod [who][operation][permissions] file</code></p>
                        
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Who</th>
                                    <th>Operation</th>
                                    <th>Permission</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code class="inline">u</code> = user (owner)</td>
                                    <td><code class="inline">+</code> = add</td>
                                    <td><code class="inline">r</code> = read</td>
                                </tr>
                                <tr>
                                    <td><code class="inline">g</code> = group</td>
                                    <td><code class="inline">-</code> = remove</td>
                                    <td><code class="inline">w</code> = write</td>
                                </tr>
                                <tr>
                                    <td><code class="inline">o</code> = other</td>
                                    <td><code class="inline">=</code> = set exactly</td>
                                    <td><code class="inline">x</code> = execute</td>
                                </tr>
                                <tr>
                                    <td><code class="inline">a</code> = all (u+g+o)</td>
                                    <td></td>
                                    <td><code class="inline">X</code> = execute (dirs only)</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="code-block">
                            <span class="code-title">Symbolic chmod Examples</span>
                            <code><span class="code-comment"># Add execute permission for owner</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod u+x script.sh</span>

<span class="code-comment"># Remove write permission from group and others</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod go-w document.txt</span>

<span class="code-comment"># Set group permissions to read-only</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod g=r document.txt</span>

<span class="code-comment"># Add read permission for everyone</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod a+r readme.txt</span>

<span class="code-comment"># Multiple changes at once</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod u+rwx,g=rx,o-rwx script.sh</span>

<span class="code-comment"># Recursive (apply to directory and contents)</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod -R g+rX projects/</span></code>
                        </div>
                    </div>
                    
                    <div id="tab-octal" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-octal">
                        <h4>Octal (Numeric) Method</h4>
                        <p>Uses three or four octal digits. Each digit represents permissions for user, group, and other.</p>

                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Octal</th>
                                    <th>Binary</th>
                                    <th>Permission</th>
                                    <th>Symbol</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>0</td><td>000</td><td>None</td><td>---</td></tr>
                                <tr><td>1</td><td>001</td><td>Execute only</td><td>--x</td></tr>
                                <tr><td>2</td><td>010</td><td>Write only</td><td>-w-</td></tr>
                                <tr><td>3</td><td>011</td><td>Write + Execute</td><td>-wx</td></tr>
                                <tr><td>4</td><td>100</td><td>Read only</td><td>r--</td></tr>
                                <tr><td>5</td><td>101</td><td>Read + Execute</td><td>r-x</td></tr>
                                <tr><td>6</td><td>110</td><td>Read + Write</td><td>rw-</td></tr>
                                <tr><td>7</td><td>111</td><td>Read + Write + Execute</td><td>rwx</td></tr>
                            </tbody>
                        </table>

                        <div class="code-block">
                            <span class="code-title">Octal chmod Examples</span>
                            <code><span class="code-comment"># rwxr-xr-x (755) - Common for scripts and directories</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod 755 script.sh</span>

<span class="code-comment"># rw-r--r-- (644) - Common for regular files</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod 644 document.txt</span>

<span class="code-comment"># rwx------ (700) - Private directory</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod 700 private/</span>

<span class="code-comment"># rw------- (600) - Private file (like SSH keys)</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod 600 ~/.ssh/id_rsa</span>

<span class="code-comment"># Recursive with octal</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chmod -R 755 public_html/</span></code>
                        </div>
                    </div>
                </div>

                <h3>Interactive Permission Calculator</h3>
                <div class="perm-calculator">
                    <div class="perm-calc-title">ðŸ”¢ Permission Calculator</div>
                    <div class="perm-calc-grid">
                        <div class="perm-calc-col">
                            <div class="perm-calc-header user-header">User (Owner)</div>
                            <label class="perm-checkbox"><input type="checkbox" id="u-r" checked> Read (4)</label>
                            <label class="perm-checkbox"><input type="checkbox" id="u-w" checked> Write (2)</label>
                            <label class="perm-checkbox"><input type="checkbox" id="u-x"> Execute (1)</label>
                        </div>
                        <div class="perm-calc-col">
                            <div class="perm-calc-header group-header">Group</div>
                            <label class="perm-checkbox"><input type="checkbox" id="g-r" checked> Read (4)</label>
                            <label class="perm-checkbox"><input type="checkbox" id="g-w"> Write (2)</label>
                            <label class="perm-checkbox"><input type="checkbox" id="g-x"> Execute (1)</label>
                        </div>
                        <div class="perm-calc-col">
                            <div class="perm-calc-header other-header">Other</div>
                            <label class="perm-checkbox"><input type="checkbox" id="o-r" checked> Read (4)</label>
                            <label class="perm-checkbox"><input type="checkbox" id="o-w"> Write (2)</label>
                            <label class="perm-checkbox"><input type="checkbox" id="o-x"> Execute (1)</label>
                        </div>
                        <div class="perm-calc-col">
                            <div class="perm-calc-header result-header">Result</div>
                            <div class="perm-result" id="perm-octal">644</div>
                            <div class="perm-result" id="perm-symbolic" style="margin-top: 10px; font-size: 1rem;">rw-r--r--</div>
                        </div>
                    </div>
                    <p class="perm-result-label">Click the checkboxes to see the corresponding octal and symbolic permissions</p>
                </div>
            </div>
        </section>

        <!-- Section 5: Changing File Ownership -->
        <section id="section-ownership" class="content-section" aria-labelledby="ownership-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">5</span>
                <h2 id="ownership-heading">Changing File Ownership</h2>
            </div>
            <div class="section-body">
                <p>Every file has an owner and a group. The 
                    <span class="tooltip-container">
                        <button type="button" class="tooltip-trigger" aria-describedby="tooltip-chown">chown</button>
                        <span class="tooltip-content" id="tooltip-chown" role="tooltip">chown (change owner) changes the user and/or group ownership of files. Only root can change a file's owner; regular users can only change the group to one they belong to.</span>
                    </span> and 
                    <span class="tooltip-container">
                        <button type="button" class="tooltip-trigger" aria-describedby="tooltip-chgrp">chgrp</button>
                        <span class="tooltip-content" id="tooltip-chgrp" role="tooltip">chgrp (change group) changes only the group ownership of files. Regular users can change files they own to groups they are members of.</span>
                    </span> commands change these attributes.</p>

                <h3>Using chown</h3>
                <p>The <code class="inline">chown</code> command can change both owner and group. Only root can change file ownership.</p>

                <div class="code-block">
                    <span class="code-title">chown Examples</span>
                    <code><span class="code-comment"># Change owner only</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chown alice document.txt</span>

<span class="code-comment"># Change owner and group</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chown alice:developers document.txt</span>

<span class="code-comment"># Change group only (note the colon before group)</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chown :developers document.txt</span>

<span class="code-comment"># Alternative syntax with dot separator</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chown alice.developers document.txt</span>

<span class="code-comment"># Recursive (change directory and all contents)</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chown -R alice:developers projects/</span>

<span class="code-comment"># Verbose output</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chown -v bob:users file.txt</span>
<span class="code-output">changed ownership of 'file.txt' from root:root to bob:users</span></code>
                </div>

                <h3>Using chgrp</h3>
                <p>The <code class="inline">chgrp</code> command changes only the group. Regular users can change the group of files they own.</p>

                <div class="code-block">
                    <span class="code-title">chgrp Examples</span>
                    <code><span class="code-comment"># Change group</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chgrp developers project.txt</span>

<span class="code-comment"># Recursive group change</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">chgrp -R developers projects/</span>

<span class="code-comment"># Verify the change</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">ls -l project.txt</span>
<span class="code-output">-rw-rw-r--. 1 student developers 0 Jan 15 10:00 project.txt</span></code>
                </div>

                <div class="warning-box">
                    <div class="warning-box-header">
                        <span class="note-icon" aria-hidden="true">âš ï¸</span>
                        <span>Permission Required</span>
                    </div>
                    <p>Only root can change the owner of a file. Regular users can change the group of files they own, but only to groups they are members of. Use <code class="inline">id</code> or <code class="inline">groups</code> to see your group memberships.</p>
                </div>

                <div class="code-block">
                    <span class="code-title">Check Your Groups</span>
                    <code><span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">groups</span>
<span class="code-output">student wheel developers</span>

<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">id</span>
<span class="code-output">uid=1000(student) gid=1000(student) groups=1000(student),10(wheel),1001(developers)</span></code>
                </div>
            </div>
        </section>

        <!-- Section 6: Default Permissions and umask -->
        <section id="section-umask" class="content-section" aria-labelledby="umask-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">6</span>
                <h2 id="umask-heading">Default Permissions and umask</h2>
            </div>
            <div class="section-body">
                <p>When you create a new file or directory, it gets default permissions. The 
                    <span class="tooltip-container">
                        <button type="button" class="tooltip-trigger" aria-describedby="tooltip-umask">umask</button>
                        <span class="tooltip-content" id="tooltip-umask" role="tooltip">umask (user file-creation mode mask) specifies which permission bits should be removed from the default permissions when creating new files and directories.</span>
                    </span> (user file-creation mode mask) determines which permissions are removed from the defaults.</p>

                <h3>How umask Works</h3>
                <p>The system starts with base permissions and subtracts the umask:</p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Files</th>
                            <th>Directories</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Base Permissions</strong></td>
                            <td>666 (rw-rw-rw-)</td>
                            <td>777 (rwxrwxrwx)</td>
                        </tr>
                        <tr>
                            <td><strong>Default umask</strong></td>
                            <td>022 (----w--w-)</td>
                            <td>022 (----w--w-)</td>
                        </tr>
                        <tr>
                            <td><strong>Result</strong></td>
                            <td>644 (rw-r--r--)</td>
                            <td>755 (rwxr-xr-x)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="info-box">
                    <div class="info-box-header">
                        <span class="note-icon" aria-hidden="true">ðŸ“˜</span>
                        <span>Why Files Don't Get Execute by Default</span>
                    </div>
                    <p>Files start with 666 (not 777) because execute permission is a security risk. New files shouldn't be executable by defaultâ€”you must explicitly add execute permission to scripts and programs.</p>
                </div>

                <h3>Viewing and Setting umask</h3>
                <div class="code-block">
                    <span class="code-title">Working with umask</span>
                    <code><span class="code-comment"># View current umask (octal)</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">umask</span>
<span class="code-output">0022</span>

<span class="code-comment"># View umask in symbolic form</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">umask -S</span>
<span class="code-output">u=rwx,g=rx,o=rx</span>

<span class="code-comment"># Set a more restrictive umask</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">umask 027</span>

<span class="code-comment"># Verify: create test files</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">touch newfile.txt</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">mkdir newdir</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">ls -ld newfile.txt newdir</span>
<span class="code-output">drwxr-x---. 2 student student 4096 Jan 15 11:00 newdir</span>
<span class="code-output">-rw-r-----. 1 student student    0 Jan 15 11:00 newfile.txt</span></code>
                </div>

                <h3>Common umask Values</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>umask</th>
                            <th>File Result</th>
                            <th>Directory Result</th>
                            <th>Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>022</td>
                            <td>644 (rw-r--r--)</td>
                            <td>755 (rwxr-xr-x)</td>
                            <td>Default for most systems</td>
                        </tr>
                        <tr>
                            <td>027</td>
                            <td>640 (rw-r-----)</td>
                            <td>750 (rwxr-x---)</td>
                            <td>More secure, group readable</td>
                        </tr>
                        <tr>
                            <td>077</td>
                            <td>600 (rw-------)</td>
                            <td>700 (rwx------)</td>
                            <td>Private, owner only</td>
                        </tr>
                        <tr>
                            <td>002</td>
                            <td>664 (rw-rw-r--)</td>
                            <td>775 (rwxrwxr-x)</td>
                            <td>Group collaboration</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Making umask Permanent</h3>
                <p>The <code class="inline">umask</code> command only affects the current shell. To make it permanent, add it to your shell configuration:</p>

                <div class="code-block">
                    <span class="code-title">Persistent umask Settings</span>
                    <code><span class="code-comment"># Add to ~/.bashrc for user-specific setting</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">echo "umask 027" >> ~/.bashrc</span>

<span class="code-comment"># System-wide setting in /etc/profile or /etc/bashrc</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">echo "umask 027" >> /etc/profile.d/custom-umask.sh</span></code>
                </div>
            </div>
        </section>

        <!-- Section 7: Special Permissions -->
        <section id="section-special" class="content-section" aria-labelledby="special-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">7</span>
                <h2 id="special-heading">Special Permissions</h2>
            </div>
            <div class="section-body">
                <p>Beyond the standard read, write, and execute permissions, Linux has three special permission bits that provide additional access control features.</p>

                <div class="special-perm-diagram">
                    <div class="special-perm-card" tabindex="0">
                        <div class="special-perm-icon">ðŸ”‘</div>
                        <div class="special-perm-name">SUID (Set User ID)</div>
                        <div class="special-perm-code">4000 or u+s</div>
                        <p class="special-perm-desc">When set on an executable, the program runs with the file owner's permissions, not the user who runs it.</p>
                    </div>
                    <div class="special-perm-card" tabindex="0">
                        <div class="special-perm-icon">ðŸ‘¥</div>
                        <div class="special-perm-name">SGID (Set Group ID)</div>
                        <div class="special-perm-code">2000 or g+s</div>
                        <p class="special-perm-desc">On files: runs with file's group. On directories: new files inherit the directory's group.</p>
                    </div>
                    <div class="special-perm-card" tabindex="0">
                        <div class="special-perm-icon">ðŸ“Œ</div>
                        <div class="special-perm-name">Sticky Bit</div>
                        <div class="special-perm-code">1000 or o+t</div>
                        <p class="special-perm-desc">On directories: only the file owner (or root) can delete their own files, even if others have write access.</p>
                    </div>
                </div>

                <h3>SUID - Set User ID</h3>
                <p>When the SUID bit is set on an executable file, it runs with the permissions of the file owner rather than the user who runs it. This is how programs like <code class="inline">passwd</code> can modify <code class="inline">/etc/shadow</code>.</p>

                <div class="code-block">
                    <span class="code-title">SUID Examples</span>
                    <code><span class="code-comment"># View SUID file - note the 's' in user execute position</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">ls -l /usr/bin/passwd</span>
<span class="code-output">-rwsr-xr-x. 1 root root 33424 Jan 10 12:00 /usr/bin/passwd</span>

<span class="code-comment"># Set SUID using symbolic method</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chmod u+s myprogram</span>

<span class="code-comment"># Set SUID using octal (4 in the first digit)</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chmod 4755 myprogram</span>

<span class="code-comment"># Remove SUID</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chmod u-s myprogram</span>

<span class="code-comment"># Find all SUID files on system</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">find / -perm -4000 -type f 2>/dev/null</span></code>
                </div>

                <div class="warning-box">
                    <div class="warning-box-header">
                        <span class="note-icon" aria-hidden="true">âš ï¸</span>
                        <span>Security Warning</span>
                    </div>
                    <p>SUID files are potential security risks. A SUID program with a vulnerability could allow privilege escalation. Only set SUID on programs that absolutely need it, and regularly audit SUID files on your system.</p>
                </div>

                <h3>SGID - Set Group ID</h3>
                <p>SGID has different effects on files and directories:</p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>On Files</th>
                            <th>On Directories</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>The program runs with the group permissions of the file's group</td>
                            <td>New files created inside inherit the directory's group, not the user's primary group</td>
                        </tr>
                    </tbody>
                </table>

                <div class="code-block">
                    <span class="code-title">SGID on Directories (Common Use)</span>
                    <code><span class="code-comment"># Create a shared project directory</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">mkdir /shared/project</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chown :developers /shared/project</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chmod 2775 /shared/project</span>

<span class="code-comment"># Note the 's' in group execute position</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">ls -ld /shared/project</span>
<span class="code-output">drwxrwsr-x. 2 root developers 4096 Jan 15 12:00 /shared/project</span>

<span class="code-comment"># Now when alice creates a file, it belongs to developers group</span>
<span class="code-prompt">[alice@workstation project]$</span> <span class="code-command">touch myfile.txt</span>
<span class="code-prompt">[alice@workstation project]$</span> <span class="code-command">ls -l myfile.txt</span>
<span class="code-output">-rw-rw-r--. 1 alice developers 0 Jan 15 12:05 myfile.txt</span></code>
                </div>

                <h3>Sticky Bit</h3>
                <p>The sticky bit protects files in shared directories. When set on a directory, only the file owner (or root) can delete or rename files within it.</p>

                <div class="code-block">
                    <span class="code-title">Sticky Bit Example</span>
                    <code><span class="code-comment"># The /tmp directory uses sticky bit</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">ls -ld /tmp</span>
<span class="code-output">drwxrwxrwt. 15 root root 4096 Jan 15 12:00 /tmp</span>

<span class="code-comment"># Note the 't' in the other execute position</span>

<span class="code-comment"># Set sticky bit using symbolic method</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chmod o+t /shared/uploads</span>

<span class="code-comment"># Set sticky bit using octal (1 in the first digit)</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">chmod 1777 /shared/uploads</span>

<span class="code-comment"># Verify</span>
<span class="code-prompt">[root@workstation ~]#</span> <span class="code-command">ls -ld /shared/uploads</span>
<span class="code-output">drwxrwxrwt. 2 root root 4096 Jan 15 12:00 /shared/uploads</span></code>
                </div>

                <h3>Special Permission Summary</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Permission</th>
                            <th>Octal</th>
                            <th>Symbolic</th>
                            <th>In ls -l</th>
                            <th>Effect</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>SUID</td>
                            <td>4</td>
                            <td>u+s</td>
                            <td><code class="inline">rw<strong>s</strong></code></td>
                            <td>Execute as owner</td>
                        </tr>
                        <tr>
                            <td>SGID</td>
                            <td>2</td>
                            <td>g+s</td>
                            <td><code class="inline">rw<strong>s</strong></code></td>
                            <td>Execute as group / Inherit group</td>
                        </tr>
                        <tr>
                            <td>Sticky</td>
                            <td>1</td>
                            <td>o+t</td>
                            <td><code class="inline">rwx<strong>t</strong></code></td>
                            <td>Only owner can delete</td>
                        </tr>
                    </tbody>
                </table>

                <div class="note-box">
                    <div class="note-box-header">
                        <span class="note-icon" aria-hidden="true">ðŸ’¡</span>
                        <span>Capital Letters in Permissions</span>
                    </div>
                    <p>If you see a capital <code class="inline">S</code> or <code class="inline">T</code> instead of lowercase, it means the special permission is set but the underlying execute permission is not. For example, <code class="inline">rwS</code> means SUID is set but the file isn't executable by the ownerâ€”usually a misconfiguration.</p>
                </div>
            </div>
        </section>

        <!-- Section 8: Knowledge Check Quiz -->
        <section id="section-quiz" class="content-section" aria-labelledby="quiz-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">8</span>
                <h2 id="quiz-heading">Knowledge Check</h2>
            </div>
            <div class="section-body">
                <div class="quiz-container">
                    <div class="quiz-header">
                        <h3 class="quiz-title">Test Your Understanding</h3>
                        <span class="quiz-score" id="quiz-score">Score: 0/5</span>
                    </div>

                    <!-- Question 1 -->
                    <div class="quiz-question" data-question="1" data-correct="c">
                        <p class="question-text"><span class="question-number">Q1.</span> What does the permission string <code class="inline">-rwxr-x---</code> mean?</p>
                        <div class="quiz-options" role="radiogroup" aria-label="Question 1 options">
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="a">
                                Owner: read only, Group: read/execute, Other: none
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="b">
                                Owner: read/write, Group: read/execute, Other: execute
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="c">
                                Owner: read/write/execute, Group: read/execute, Other: none
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="d">
                                Owner: all, Group: all, Other: none
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-1"></div>
                    </div>

                    <!-- Question 2 -->
                    <div class="quiz-question" data-question="2" data-correct="b">
                        <p class="question-text"><span class="question-number">Q2.</span> What is the octal equivalent of <code class="inline">rw-r--r--</code>?</p>
                        <div class="quiz-options" role="radiogroup" aria-label="Question 2 options">
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="a">
                                755
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="b">
                                644
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="c">
                                664
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="d">
                                600
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-2"></div>
                    </div>

                    <!-- Question 3 -->
                    <div class="quiz-question" data-question="3" data-correct="a">
                        <p class="question-text"><span class="question-number">Q3.</span> Which command adds execute permission for the owner only?</p>
                        <div class="quiz-options" role="radiogroup" aria-label="Question 3 options">
                            <label class="quiz-option">
                                <input type="radio" name="q3" value="a">
                                chmod u+x file
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q3" value="b">
                                chmod a+x file
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q3" value="c">
                                chmod +x file
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q3" value="d">
                                chmod o+x file
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-3"></div>
                    </div>

                    <!-- Question 4 -->
                    <div class="quiz-question" data-question="4" data-correct="d">
                        <p class="question-text"><span class="question-number">Q4.</span> What does the sticky bit do when set on a directory?</p>
                        <div class="quiz-options" role="radiogroup" aria-label="Question 4 options">
                            <label class="quiz-option">
                                <input type="radio" name="q4" value="a">
                                Makes the directory read-only
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q4" value="b">
                                New files inherit the directory's group
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q4" value="c">
                                Programs run with owner's permissions
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q4" value="d">
                                Only file owners can delete their own files
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-4"></div>
                    </div>

                    <!-- Question 5 -->
                    <div class="quiz-question" data-question="5" data-correct="c">
                        <p class="question-text"><span class="question-number">Q5.</span> With a umask of 027, what permissions will a new file have?</p>
                        <div class="quiz-options" role="radiogroup" aria-label="Question 5 options">
                            <label class="quiz-option">
                                <input type="radio" name="q5" value="a">
                                750 (rwxr-x---)
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q5" value="b">
                                644 (rw-r--r--)
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q5" value="c">
                                640 (rw-r-----)
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q5" value="d">
                                660 (rw-rw----)
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-5"></div>
                    </div>

                    <button type="button" class="quiz-btn" id="check-answers">Check Answers</button>
                    <button type="button" class="quiz-btn" id="reset-quiz" style="display: none; margin-left: 10px; background: var(--rh-gray);">Reset Quiz</button>
                </div>
            </div>
        </section>

        <!-- Section 9: Hands-on Lab -->
        <section id="section-lab" class="content-section" aria-labelledby="lab-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">9</span>
                <h2 id="lab-heading">Hands-on Lab</h2>
            </div>
            <div class="section-body">
                <div class="lab-container">
                    <div class="lab-header">
                        <span class="lab-icon">ðŸ”¬</span>
                        <span class="lab-title">Lab: Managing File Permissions</span>
                    </div>
                    <p style="margin-bottom: 20px;">Practice managing file permissions, ownership, and special permissions.</p>

                    <div class="lab-step">
                        <p><span class="step-number">Step 1</span> <strong>Create Test Files and Directory</strong></p>
                        <div class="code-block">
                            <code><span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">mkdir ~/permlab</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">cd ~/permlab</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">touch document.txt script.sh private.key</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">ls -l</span>
<span class="code-output">-rw-r--r--. 1 student student 0 Jan 15 12:00 document.txt</span>
<span class="code-output">-rw-r--r--. 1 student student 0 Jan 15 12:00 private.key</span>
<span class="code-output">-rw-r--r--. 1 student student 0 Jan 15 12:00 script.sh</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <p><span class="step-number">Step 2</span> <strong>Make Script Executable</strong></p>
                        <p>Add a shebang line and make the script executable.</p>
                        <div class="code-block">
                            <code><span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">echo '#!/bin/bash' > script.sh</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">echo 'echo "Hello from script!"' >> script.sh</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">chmod u+x script.sh</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">ls -l script.sh</span>
<span class="code-output">-rwxr--r--. 1 student student 35 Jan 15 12:05 script.sh</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">./script.sh</span>
<span class="code-output">Hello from script!</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <p><span class="step-number">Step 3</span> <strong>Secure a Private File</strong></p>
                        <p>Make the private key readable only by the owner.</p>
                        <div class="code-block">
                            <code><span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">chmod 600 private.key</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">ls -l private.key</span>
<span class="code-output">-rw-------. 1 student student 0 Jan 15 12:00 private.key</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <p><span class="step-number">Step 4</span> <strong>Set Group Permissions</strong></p>
                        <p>Make the document writable by group members.</p>
                        <div class="code-block">
                            <code><span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">chmod g+w document.txt</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">ls -l document.txt</span>
<span class="code-output">-rw-rw-r--. 1 student student 0 Jan 15 12:00 document.txt</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <p><span class="step-number">Step 5</span> <strong>Create a Shared Directory with SGID</strong></p>
                        <p>Create a directory where all files inherit the group ownership.</p>
                        <div class="code-block">
                            <code><span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">mkdir shared</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">chmod 2775 shared</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">ls -ld shared</span>
<span class="code-output">drwxrwsr-x. 2 student student 4096 Jan 15 12:10 shared</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <p><span class="step-number">Step 6</span> <strong>Test umask Settings</strong></p>
                        <div class="code-block">
                            <code><span class="code-comment"># Check current umask</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">umask</span>
<span class="code-output">0022</span>

<span class="code-comment"># Set a restrictive umask temporarily</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">umask 077</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">touch private_new.txt</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">ls -l private_new.txt</span>
<span class="code-output">-rw-------. 1 student student 0 Jan 15 12:15 private_new.txt</span>

<span class="code-comment"># Reset umask to default</span>
<span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">umask 022</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <p><span class="step-number">Step 7</span> <strong>Clean Up</strong></p>
                        <div class="code-block">
                            <code><span class="code-prompt">[student@workstation permlab]$</span> <span class="code-command">cd ~</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">rm -rf ~/permlab</span></code>
                        </div>
                    </div>

                    <div class="note-box" style="margin-top: 20px;">
                        <div class="note-box-header">
                            <span class="note-icon" aria-hidden="true">âœ…</span>
                            <span>Lab Complete</span>
                        </div>
                        <p>You have successfully practiced changing file permissions, securing files, and using special permissions.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 10: Chapter Summary -->
        <section id="section-summary" class="content-section" aria-labelledby="summary-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">10</span>
                <h2 id="summary-heading">Chapter Summary</h2>
            </div>
            <div class="section-body">
                <div class="summary-box">
                    <h3>Key Takeaways</h3>
                    <ul class="summary-list">
                        <li><strong>Linux file permissions</strong> are organized into three categories: user (owner), group, and other, each with read, write, and execute permissions.</li>
                        <li><strong>Use <code class="inline">ls -l</code></strong> to view permissions as a 10-character string where the first character shows file type and the next nine show permissions.</li>
                        <li><strong>chmod</strong> changes permissions using symbolic (u+x, g-w) or octal (755, 644) methods.</li>
                        <li><strong>chown and chgrp</strong> change file ownership. Only root can change the owner; users can change group to groups they belong to.</li>
                        <li><strong>umask</strong> sets default permissions for new files (base 666) and directories (base 777) by specifying bits to remove.</li>
                        <li><strong>Special permissions</strong> include SUID (4000, run as owner), SGID (2000, run as group/inherit group), and sticky bit (1000, restrict deletion).</li>
                        <li><strong>Directory permissions</strong> work differently: read lists contents, write allows creating/deleting files, execute allows entering the directory.</li>
                    </ul>
                </div>

                <div class="key-points">
                    <h4>Quick Reference</h4>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Task</th>
                                <th>Command</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>View permissions</td>
                                <td><code class="inline">ls -l filename</code></td>
                            </tr>
                            <tr>
                                <td>Make file executable</td>
                                <td><code class="inline">chmod +x filename</code></td>
                            </tr>
                            <tr>
                                <td>Set standard file permissions</td>
                                <td><code class="inline">chmod 644 filename</code></td>
                            </tr>
                            <tr>
                                <td>Set standard directory permissions</td>
                                <td><code class="inline">chmod 755 dirname</code></td>
                            </tr>
                            <tr>
                                <td>Private file (owner only)</td>
                                <td><code class="inline">chmod 600 filename</code></td>
                            </tr>
                            <tr>
                                <td>Change owner</td>
                                <td><code class="inline">chown user:group filename</code></td>
                            </tr>
                            <tr>
                                <td>View current umask</td>
                                <td><code class="inline">umask</code></td>
                            </tr>
                            <tr>
                                <td>Set SGID on directory</td>
                                <td><code class="inline">chmod g+s dirname</code></td>
                            </tr>
                            <tr>
                                <td>Set sticky bit</td>
                                <td><code class="inline">chmod +t dirname</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="key-points">
                    <h4>What's Next?</h4>
                    <p>In Chapter 12, you'll learn about installing software with RPM packages, including:</p>
                    <ul>
                        <li>Understanding the RPM package format</li>
                        <li>Installing, updating, and removing packages with DNF</li>
                        <li>Querying package information</li>
                        <li>Managing software repositories</li>
                    </ul>
                </div>

                <div class="completion-section">
                    <h2>ðŸŽ‰ Chapter 11 Complete!</h2>
                    <p>You've learned how to control access to files in Red Hat Enterprise Linux.</p>
                    <button class="completion-btn" id="mark-complete" type="button">Mark Chapter as Complete</button>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="main-footer" role="contentinfo">
        <p>RH124: Red Hat System Administration I â€¢ Chapter 11 â€¢ Version 10.0</p>
        <p style="margin-top: 10px; font-size: 0.8rem;">Â© Red Hat, Inc. All rights reserved. Red Hat and the Red Hat logo are trademarks of Red Hat, Inc.</p>
    </footer>

    <!-- JavaScript -->
    <script>
        (function() {
            'use strict';

            // ==================== PROGRESS TRACKING ====================
            const sections = document.querySelectorAll('.content-section');
            const progressFill = document.getElementById('progress-fill');
            const progressPercent = document.getElementById('progress-percent');
            const navBtns = document.querySelectorAll('.nav-btn');
            const visitedSections = new Set();

            function updateProgress() {
                const percentage = Math.round((visitedSections.size / sections.length) * 100);
                progressFill.style.width = percentage + '%';
                progressFill.setAttribute('aria-valuenow', percentage);
                progressPercent.textContent = percentage + '%';
            }

            // Intersection Observer for progress tracking
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        visitedSections.add(entry.target.id);
                        updateProgress();
                        
                        navBtns.forEach(btn => {
                            if (btn.getAttribute('href') === '#' + entry.target.id) {
                                btn.classList.add('visited');
                                navBtns.forEach(b => b.classList.remove('active'));
                                btn.classList.add('active');
                            }
                        });
                    }
                });
            }, { threshold: 0.3 });

            sections.forEach(section => observer.observe(section));

            // ==================== TABS ====================
            const tabContainers = document.querySelectorAll('.tabs-container');
            
            tabContainers.forEach(container => {
                const tabs = container.querySelectorAll('.tab-btn');
                const panels = container.querySelectorAll('.tab-content');

                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
                        panels.forEach(p => p.classList.remove('active'));

                        tab.setAttribute('aria-selected', 'true');
                        const panelId = tab.getAttribute('aria-controls');
                        document.getElementById(panelId).classList.add('active');
                    });

                    tab.addEventListener('keydown', (e) => {
                        const currentIndex = Array.from(tabs).indexOf(tab);
                        
                        if (e.key === 'ArrowRight') {
                            e.preventDefault();
                            const nextIndex = (currentIndex + 1) % tabs.length;
                            tabs[nextIndex].focus();
                            tabs[nextIndex].click();
                        } else if (e.key === 'ArrowLeft') {
                            e.preventDefault();
                            const prevIndex = (currentIndex - 1 + tabs.length) % tabs.length;
                            tabs[prevIndex].focus();
                            tabs[prevIndex].click();
                        }
                    });
                });
            });

            // ==================== EXPANDABLE SECTIONS ====================
            const expandables = document.querySelectorAll('.expandable-header');
            
            expandables.forEach(header => {
                header.addEventListener('click', () => {
                    const expanded = header.getAttribute('aria-expanded') === 'true';
                    header.setAttribute('aria-expanded', !expanded);
                    const content = document.getElementById(header.getAttribute('aria-controls'));
                    content.classList.toggle('active');
                });
            });

            // ==================== PERMISSION CALCULATOR ====================
            const permCheckboxes = document.querySelectorAll('.perm-checkbox input');
            const permOctal = document.getElementById('perm-octal');
            const permSymbolic = document.getElementById('perm-symbolic');

            function updatePermissions() {
                let user = 0, group = 0, other = 0;
                let symbolic = '';

                if (document.getElementById('u-r').checked) { user += 4; symbolic += 'r'; } else { symbolic += '-'; }
                if (document.getElementById('u-w').checked) { user += 2; symbolic += 'w'; } else { symbolic += '-'; }
                if (document.getElementById('u-x').checked) { user += 1; symbolic += 'x'; } else { symbolic += '-'; }

                if (document.getElementById('g-r').checked) { group += 4; symbolic += 'r'; } else { symbolic += '-'; }
                if (document.getElementById('g-w').checked) { group += 2; symbolic += 'w'; } else { symbolic += '-'; }
                if (document.getElementById('g-x').checked) { group += 1; symbolic += 'x'; } else { symbolic += '-'; }

                if (document.getElementById('o-r').checked) { other += 4; symbolic += 'r'; } else { symbolic += '-'; }
                if (document.getElementById('o-w').checked) { other += 2; symbolic += 'w'; } else { symbolic += '-'; }
                if (document.getElementById('o-x').checked) { other += 1; symbolic += 'x'; } else { symbolic += '-'; }

                permOctal.textContent = '' + user + group + other;
                permSymbolic.textContent = symbolic;
            }

            permCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updatePermissions);
            });

            // ==================== QUIZ FUNCTIONALITY ====================
            const checkAnswersBtn = document.getElementById('check-answers');
            const resetQuizBtn = document.getElementById('reset-quiz');
            const quizScore = document.getElementById('quiz-score');
            const quizQuestions = document.querySelectorAll('.quiz-question');

            const correctAnswers = {
                1: { answer: 'c', explanation: 'Correct! rwx = owner has all permissions, r-x = group has read/execute, --- = others have none.' },
                2: { answer: 'b', explanation: 'Correct! rw- (6) + r-- (4) + r-- (4) = 644.' },
                3: { answer: 'a', explanation: 'Correct! u+x adds execute permission specifically for the user (owner) only.' },
                4: { answer: 'd', explanation: 'Correct! The sticky bit restricts deletionâ€”only file owners can delete their own files.' },
                5: { answer: 'c', explanation: 'Correct! Files start at 666, minus umask 027 = 640 (rw-r-----).' }
            };

            checkAnswersBtn.addEventListener('click', () => {
                let score = 0;

                quizQuestions.forEach(question => {
                    const qNum = question.getAttribute('data-question');
                    const selected = question.querySelector('input:checked');
                    const feedback = document.getElementById(`feedback-${qNum}`);
                    const options = question.querySelectorAll('.quiz-option');

                    options.forEach(opt => opt.classList.remove('correct', 'incorrect'));

                    if (selected) {
                        const selectedLabel = selected.closest('.quiz-option');
                        if (selected.value === correctAnswers[qNum].answer) {
                            score++;
                            selectedLabel.classList.add('correct');
                            feedback.className = 'quiz-feedback show correct';
                            feedback.innerHTML = 'âœ“ ' + correctAnswers[qNum].explanation;
                        } else {
                            selectedLabel.classList.add('incorrect');
                            const correctOption = question.querySelector(`input[value="${correctAnswers[qNum].answer}"]`);
                            correctOption.closest('.quiz-option').classList.add('correct');
                            feedback.className = 'quiz-feedback show incorrect';
                            feedback.innerHTML = 'âœ— Incorrect. ' + correctAnswers[qNum].explanation;
                        }
                    } else {
                        feedback.className = 'quiz-feedback show incorrect';
                        feedback.innerHTML = 'âš  Please select an answer.';
                    }
                });

                quizScore.textContent = `Score: ${score}/5`;
                checkAnswersBtn.style.display = 'none';
                resetQuizBtn.style.display = 'inline-block';

                if (score === 5) {
                    localStorage.setItem('ch11-quiz-passed', 'true');
                }
            });

            resetQuizBtn.addEventListener('click', () => {
                quizQuestions.forEach(question => {
                    const qNum = question.getAttribute('data-question');
                    const feedback = document.getElementById(`feedback-${qNum}`);
                    const options = question.querySelectorAll('.quiz-option');
                    const inputs = question.querySelectorAll('input');

                    options.forEach(opt => opt.classList.remove('correct', 'incorrect'));
                    inputs.forEach(input => input.checked = false);
                    feedback.className = 'quiz-feedback';
                    feedback.innerHTML = '';
                });

                quizScore.textContent = 'Score: 0/5';
                checkAnswersBtn.style.display = 'inline-block';
                resetQuizBtn.style.display = 'none';
            });

            // ==================== COMPLETION BUTTON ====================
            const completeBtn = document.getElementById('mark-complete');
            if (completeBtn) {
                completeBtn.addEventListener('click', () => {
                    completeBtn.textContent = 'âœ“ Chapter Completed!';
                    completeBtn.style.background = '#267326';
                    completeBtn.disabled = true;

                    sections.forEach(section => {
                        visitedSections.add(section.id);
                    });
                    updateProgress();

                    localStorage.setItem('ch11-complete', 'true');

                    alert('Congratulations! You have completed Chapter 11: Controlling Access to Files. Continue to Chapter 12 to learn about installing software with RPM.');
                });

                if (localStorage.getItem('ch11-complete') === 'true') {
                    completeBtn.textContent = 'âœ“ Chapter Completed!';
                    completeBtn.style.background = '#267326';
                    completeBtn.disabled = true;
                }
            }

            // ==================== TOOLTIP POSITIONING ====================
            const tooltipTriggers = document.querySelectorAll('.tooltip-trigger');

            tooltipTriggers.forEach(trigger => {
                trigger.addEventListener('mouseenter', positionTooltip);
                trigger.addEventListener('focus', positionTooltip);
            });

            function positionTooltip(e) {
                const trigger = e.target;
                const container = trigger.closest('.tooltip-container');
                const tooltip = container.querySelector('.tooltip-content');

                tooltip.classList.remove('tooltip-left', 'tooltip-right', 'tooltip-bottom');

                const rect = trigger.getBoundingClientRect();
                const tooltipRect = tooltip.getBoundingClientRect();

                if (rect.left + (rect.width / 2) - (tooltipRect.width / 2) < 10) {
                    tooltip.classList.add('tooltip-left');
                } else if (rect.right - (rect.width / 2) + (tooltipRect.width / 2) > window.innerWidth - 10) {
                    tooltip.classList.add('tooltip-right');
                }

                if (rect.top < tooltipRect.height + 20) {
                    tooltip.classList.add('tooltip-bottom');
                }
            }

            // ==================== SMOOTH SCROLLING ====================
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

        })();
    </script>
</body>
</html>
