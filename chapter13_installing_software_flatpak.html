<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 13: Installing and Updating Software with Flatpak | RH124</title>
    <style>
        /* ==================== CSS VARIABLES ==================== */
        :root {
            --rh-red: #CC0000;
            --rh-red-dark: #990000;
            --rh-red-light: #FF3333;
            --rh-black: #1A1A1A;
            --rh-gray-dark: #333333;
            --rh-gray: #666666;
            --rh-gray-light: #CCCCCC;
            --rh-gray-lighter: #F0F0F0;
            --rh-white: #FFFFFF;
            --rh-blue: #0066CC;
            --rh-blue-dark: #004C99;
            --rh-teal: #009999;
            --rh-gold: #CC9900;
            --rh-green: #339933;
            --rh-green-dark: #267326;
            --rh-purple: #663399;
            --rh-orange: #FF6600;
            
            --font-display: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            --font-body: Georgia, 'Times New Roman', serif;
            --font-mono: 'Consolas', 'Courier New', monospace;
            
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.2);
            
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 16px;
            
            --transition-fast: 0.2s ease;
            --transition-med: 0.3s ease;
        }

        /* ==================== RESET & BASE ==================== */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-body);
            background: linear-gradient(135deg, var(--rh-gray-lighter) 0%, var(--rh-white) 50%, var(--rh-gray-lighter) 100%);
            color: var(--rh-black);
            line-height: 1.7;
            min-height: 100vh;
        }

        /* ==================== ACCESSIBILITY ==================== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        *:focus {
            outline: 3px solid var(--rh-blue);
            outline-offset: 2px;
        }

        *:focus:not(:focus-visible) {
            outline: none;
        }

        *:focus-visible {
            outline: 3px solid var(--rh-blue);
            outline-offset: 2px;
        }

        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--rh-red);
            color: var(--rh-white);
            padding: 12px 24px;
            text-decoration: none;
            font-family: var(--font-display);
            font-weight: 600;
            border-radius: var(--radius-md);
            z-index: 10000;
            transition: top var(--transition-fast);
        }

        .skip-link:focus {
            top: 10px;
        }

        @media (prefers-contrast: high) {
            :root {
                --rh-gray-light: #888888;
                --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            html {
                scroll-behavior: auto;
            }
        }

        /* ==================== HEADER ==================== */
        .main-header {
            background: linear-gradient(135deg, var(--rh-black) 0%, var(--rh-gray-dark) 100%);
            color: var(--rh-white);
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .main-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--rh-red);
        }

        .main-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
        }

        .course-badge {
            display: inline-block;
            background: var(--rh-red);
            color: var(--rh-white);
            padding: 8px 20px;
            border-radius: 50px;
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 0.9rem;
            letter-spacing: 1px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
        }

        .main-header h1 {
            font-family: var(--font-display);
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .chapter-subtitle {
            font-size: 1.1rem;
            color: var(--rh-gray-light);
            max-width: 600px;
            margin: 0 auto;
        }

        /* ==================== NAVIGATION ==================== */
        .section-nav {
            background: var(--rh-white);
            border-bottom: 1px solid var(--rh-gray-light);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .nav-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-btn {
            padding: 10px 16px;
            background: var(--rh-gray-lighter);
            color: var(--rh-gray-dark);
            text-decoration: none;
            border-radius: var(--radius-sm);
            font-family: var(--font-display);
            font-size: 0.85rem;
            font-weight: 600;
            transition: all var(--transition-fast);
            border: 2px solid transparent;
        }

        .nav-btn:hover {
            background: var(--rh-blue);
            color: var(--rh-white);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: var(--rh-red);
            color: var(--rh-white);
        }

        .nav-btn.visited {
            border-color: var(--rh-green);
        }

        /* ==================== PROGRESS BAR ==================== */
        .progress-container {
            background: var(--rh-white);
            padding: 15px 20px;
            border-bottom: 1px solid var(--rh-gray-light);
        }

        .progress-inner {
            max-width: 800px;
            margin: 0 auto;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-family: var(--font-display);
            font-size: 0.85rem;
            color: var(--rh-gray);
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 8px;
            background: var(--rh-gray-lighter);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--rh-green) 0%, var(--rh-teal) 100%);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* ==================== MAIN CONTENT ==================== */
        .main-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .content-section {
            background: var(--rh-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: 40px;
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, var(--rh-gray-dark) 0%, var(--rh-black) 100%);
            color: var(--rh-white);
            padding: 25px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .section-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: var(--rh-red);
            border-radius: 50%;
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .section-header h2 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
        }

        .section-body {
            padding: 30px;
        }

        .section-body p {
            margin-bottom: 15px;
        }

        .section-body h3 {
            font-family: var(--font-display);
            color: var(--rh-gray-dark);
            font-size: 1.3rem;
            margin: 25px 0 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--rh-red);
        }

        .section-body h4 {
            font-family: var(--font-display);
            color: var(--rh-gray-dark);
            font-size: 1.1rem;
            margin: 20px 0 10px;
        }

        /* ==================== TOOLTIPS ==================== */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }

        .tooltip-trigger {
            background: none;
            border: none;
            border-bottom: 2px dotted var(--rh-blue);
            color: var(--rh-blue);
            font-size: inherit;
            font-family: inherit;
            cursor: help;
            padding: 0;
        }

        .tooltip-content {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            bottom: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--rh-gray-dark);
            color: var(--rh-white);
            padding: 12px 16px;
            border-radius: var(--radius-md);
            font-family: var(--font-display);
            font-size: 0.85rem;
            line-height: 1.5;
            width: 280px;
            max-width: 90vw;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
            transition: opacity var(--transition-fast), visibility var(--transition-fast);
        }

        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 8px;
            border-style: solid;
            border-color: var(--rh-gray-dark) transparent transparent transparent;
        }

        .tooltip-trigger:hover + .tooltip-content,
        .tooltip-trigger:focus + .tooltip-content {
            visibility: visible;
            opacity: 1;
        }

        .tooltip-content.tooltip-left {
            left: 0;
            transform: translateX(0);
        }

        .tooltip-content.tooltip-left::after {
            left: 20px;
            transform: translateX(0);
        }

        .tooltip-content.tooltip-right {
            left: auto;
            right: 0;
            transform: translateX(0);
        }

        .tooltip-content.tooltip-right::after {
            left: auto;
            right: 20px;
            transform: translateX(0);
        }

        .tooltip-content.tooltip-bottom {
            bottom: auto;
            top: calc(100% + 10px);
        }

        .tooltip-content.tooltip-bottom::after {
            top: auto;
            bottom: 100%;
            border-top-color: transparent;
            border-bottom-color: var(--rh-gray-dark);
        }

        /* ==================== TABS ==================== */
        .tabs-container {
            margin: 25px 0;
        }

        .tab-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            border-bottom: 2px solid var(--rh-gray-light);
            padding-bottom: 0;
        }

        .tab-btn {
            padding: 12px 20px;
            background: var(--rh-gray-lighter);
            border: none;
            border-radius: var(--radius-md) var(--radius-md) 0 0;
            font-family: var(--font-display);
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--rh-gray);
            cursor: pointer;
            transition: all var(--transition-fast);
            min-width: 100px;
        }

        .tab-btn:hover {
            background: var(--rh-blue);
            color: var(--rh-white);
        }

        .tab-btn[aria-selected="true"] {
            background: var(--rh-red);
            color: var(--rh-white);
        }

        .tab-content {
            display: none;
            padding: 25px;
            background: var(--rh-gray-lighter);
            border-radius: 0 0 var(--radius-md) var(--radius-md);
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h4 {
            margin-top: 0;
        }

        /* ==================== CODE BLOCKS ==================== */
        .code-block {
            background: var(--rh-black);
            color: #00FF00;
            padding: 20px;
            border-radius: var(--radius-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 20px 0;
            position: relative;
        }

        .code-block code {
            display: block;
            white-space: pre;
        }

        .code-block .code-comment {
            color: #888888;
        }

        .code-block .code-prompt {
            color: #00FFFF;
        }

        .code-block .code-command {
            color: #FFFF00;
        }

        .code-block .code-output {
            color: #FFFFFF;
        }

        .code-block .code-error {
            color: #FF6666;
        }

        .code-block .code-file {
            color: #99FF99;
        }

        .code-block .code-highlight {
            color: #FF99FF;
        }

        .code-title {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--rh-gray-dark);
            color: var(--rh-gray-light);
            padding: 5px 15px;
            border-radius: 0 var(--radius-md) 0 var(--radius-md);
            font-family: var(--font-display);
            font-size: 0.75rem;
        }

        code.inline {
            background: var(--rh-gray-lighter);
            padding: 3px 8px;
            border-radius: var(--radius-sm);
            font-family: var(--font-mono);
            font-size: 0.9em;
            color: var(--rh-red-dark);
        }

        /* ==================== NOTE BOXES ==================== */
        .note-box {
            background: linear-gradient(135deg, #FFF9E6 0%, #FFF0CC 100%);
            border: 2px solid var(--rh-gold);
            border-radius: var(--radius-md);
            padding: 20px;
            margin: 25px 0;
        }

        .note-box-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-gray-dark);
            margin-bottom: 10px;
        }

        .note-icon {
            font-size: 1.2rem;
        }

        .warning-box {
            background: linear-gradient(135deg, #FFF0F0 0%, #FFE0E0 100%);
            border: 2px solid var(--rh-red);
            border-radius: var(--radius-md);
            padding: 20px;
            margin: 25px 0;
        }

        .warning-box-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-red-dark);
            margin-bottom: 10px;
        }

        .info-box {
            background: linear-gradient(135deg, #E6F0FF 0%, #CCE5FF 100%);
            border: 2px solid var(--rh-blue);
            border-radius: var(--radius-md);
            padding: 20px;
            margin: 25px 0;
        }

        .info-box-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-blue-dark);
            margin-bottom: 10px;
        }

        /* ==================== KEY POINTS ==================== */
        .key-points {
            background: linear-gradient(135deg, #E6F0FF 0%, #CCE5FF 100%);
            border-left: 4px solid var(--rh-blue);
            padding: 25px;
            border-radius: var(--radius-md);
            margin: 25px 0;
        }

        .key-points h4 {
            font-family: var(--font-display);
            color: var(--rh-blue-dark);
            margin-bottom: 15px;
            font-size: 1.1rem;
            margin-top: 0;
        }

        .key-points ul {
            list-style: disc;
            padding-left: 20px;
        }

        .key-points li {
            margin-bottom: 8px;
        }

        /* ==================== COMPARISON TABLE ==================== */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-family: var(--font-display);
            font-size: 0.95rem;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border: 1px solid var(--rh-gray-light);
        }

        .comparison-table th {
            background: var(--rh-gray-dark);
            color: var(--rh-white);
            font-weight: 600;
        }

        .comparison-table tr:nth-child(even) {
            background: var(--rh-gray-lighter);
        }

        .comparison-table tr:hover {
            background: #E6F0FF;
        }

        /* ==================== FLATPAK IDENTIFIER DIAGRAM ==================== */
        .identifier-diagram {
            background: var(--rh-gray-lighter);
            border: 2px solid var(--rh-gray-light);
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }

        .identifier-diagram-title {
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-gray-dark);
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .identifier-visual {
            font-family: var(--font-mono);
            font-size: 1.3rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .id-part {
            display: inline-block;
            padding: 10px 15px;
            border-radius: var(--radius-sm);
            font-weight: 700;
            min-width: 60px;
            text-align: center;
        }

        .id-domain {
            background: var(--rh-blue);
            color: var(--rh-white);
        }

        .id-org {
            background: var(--rh-green);
            color: var(--rh-white);
        }

        .id-app {
            background: var(--rh-red);
            color: var(--rh-white);
        }

        .id-sep {
            color: var(--rh-gray-dark);
            font-weight: bold;
            font-size: 1.5rem;
        }

        .identifier-labels {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .id-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-display);
            font-size: 0.85rem;
        }

        .id-label-color {
            width: 20px;
            height: 20px;
            border-radius: var(--radius-sm);
        }

        /* ==================== FLOW DIAGRAM ==================== */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 25px 0;
            padding: 20px;
            background: var(--rh-gray-lighter);
            border-radius: var(--radius-md);
        }

        .flow-box {
            background: var(--rh-white);
            border: 2px solid var(--rh-gray-light);
            border-radius: var(--radius-md);
            padding: 15px 25px;
            font-family: var(--font-display);
            font-weight: 600;
            text-align: center;
        }

        .flow-box.highlight {
            background: var(--rh-red);
            color: var(--rh-white);
            border-color: var(--rh-red-dark);
        }

        .flow-box.highlight-blue {
            background: var(--rh-blue);
            color: var(--rh-white);
            border-color: var(--rh-blue-dark);
        }

        .flow-box.highlight-green {
            background: var(--rh-green);
            color: var(--rh-white);
            border-color: var(--rh-green-dark);
        }

        .flow-box.highlight-purple {
            background: var(--rh-purple);
            color: var(--rh-white);
            border-color: #4d2673;
        }

        .flow-arrow {
            font-size: 1.5rem;
            color: var(--rh-gray);
        }

        /* ==================== CARD GRID ==================== */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .info-card {
            background: var(--rh-white);
            border: 1px solid var(--rh-gray-light);
            border-radius: var(--radius-md);
            padding: 20px;
            transition: all var(--transition-fast);
        }

        .info-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
            border-color: var(--rh-blue);
        }

        .info-card h4 {
            font-family: var(--font-display);
            color: var(--rh-gray-dark);
            font-size: 1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-icon {
            font-size: 1.3rem;
        }

        .info-card p {
            font-size: 0.95rem;
            color: var(--rh-gray);
            margin: 0;
        }

        /* ==================== OBJECTIVES BOX ==================== */
        .objectives-box {
            background: linear-gradient(135deg, #E6FFE6 0%, #CCF2CC 100%);
            border: 2px solid var(--rh-green);
            border-radius: var(--radius-md);
            padding: 25px;
            margin-bottom: 25px;
        }

        .objectives-box h3 {
            font-family: var(--font-display);
            color: var(--rh-green-dark);
            font-size: 1.1rem;
            margin-bottom: 15px;
            border: none;
            padding: 0;
        }

        .objectives-list {
            list-style: none;
            padding: 0;
        }

        .objectives-list li {
            position: relative;
            padding-left: 30px;
            margin-bottom: 12px;
        }

        .objectives-list li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--rh-green);
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* ==================== EXPANDABLE SECTIONS ==================== */
        .expandable {
            margin: 15px 0;
            border: 1px solid var(--rh-gray-light);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .expandable-header {
            width: 100%;
            padding: 15px 20px;
            background: var(--rh-gray-lighter);
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 600;
            color: var(--rh-gray-dark);
            transition: background var(--transition-fast);
        }

        .expandable-header:hover {
            background: var(--rh-gray-light);
        }

        .expand-icon {
            transition: transform var(--transition-fast);
            font-size: 0.8rem;
        }

        .expandable-header[aria-expanded="true"] .expand-icon {
            transform: rotate(180deg);
        }

        .expandable-content {
            display: none;
            padding: 20px;
            background: var(--rh-white);
        }

        .expandable-content.show {
            display: block;
        }

        /* ==================== QUIZ STYLES ==================== */
        .quiz-container {
            background: var(--rh-gray-lighter);
            border-radius: var(--radius-md);
            padding: 25px;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .quiz-title {
            font-family: var(--font-display);
            color: var(--rh-gray-dark);
            font-size: 1.2rem;
        }

        .quiz-score {
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--rh-blue);
            font-size: 1.1rem;
        }

        .quiz-question {
            background: var(--rh-white);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid transparent;
        }

        .question-text {
            font-family: var(--font-display);
            font-weight: 600;
            color: var(--rh-gray-dark);
            margin-bottom: 15px;
        }

        .question-number {
            background: var(--rh-red);
            color: var(--rh-white);
            padding: 2px 10px;
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            margin-right: 10px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: var(--rh-gray-lighter);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .quiz-option:hover {
            background: var(--rh-gray-light);
        }

        .quiz-option input {
            width: 18px;
            height: 18px;
            accent-color: var(--rh-blue);
        }

        .quiz-option.correct {
            background: #D4EDDA;
            border: 2px solid var(--rh-green);
        }

        .quiz-option.incorrect {
            background: #F8D7DA;
            border: 2px solid var(--rh-red);
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 12px;
            border-radius: var(--radius-sm);
            font-family: var(--font-display);
            font-size: 0.9rem;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: #D4EDDA;
            color: var(--rh-green-dark);
        }

        .quiz-feedback.incorrect {
            background: #F8D7DA;
            color: var(--rh-red-dark);
        }

        .quiz-btn {
            padding: 12px 30px;
            font-family: var(--font-display);
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-right: 10px;
        }

        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        #check-answers {
            background: var(--rh-blue);
            color: var(--rh-white);
        }

        #reset-quiz {
            background: var(--rh-gray);
            color: var(--rh-white);
        }

        /* ==================== LAB STYLES ==================== */
        .lab-container {
            background: linear-gradient(135deg, #F0E6FF 0%, #E6D9FF 100%);
            border: 2px solid var(--rh-purple);
            border-radius: var(--radius-md);
            padding: 25px;
        }

        .lab-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .lab-icon {
            font-size: 2rem;
        }

        .lab-title {
            font-family: var(--font-display);
            color: var(--rh-purple);
            font-size: 1.3rem;
        }

        .lab-step {
            background: var(--rh-white);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
        }

        .lab-step h4 {
            font-family: var(--font-display);
            color: var(--rh-purple);
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        /* ==================== COMPLETION SECTION ==================== */
        .completion-section {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #E6FFE6 0%, #CCF2CC 100%);
            border-radius: var(--radius-md);
            margin-top: 30px;
        }

        .completion-section h2 {
            font-family: var(--font-display);
            color: var(--rh-green-dark);
            margin-bottom: 15px;
        }

        .completion-btn {
            padding: 15px 40px;
            font-family: var(--font-display);
            font-size: 1.1rem;
            font-weight: 700;
            background: var(--rh-green);
            color: var(--rh-white);
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-top: 15px;
        }

        .completion-btn:hover {
            background: var(--rh-green-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* ==================== FOOTER ==================== */
        .main-footer {
            background: var(--rh-black);
            color: var(--rh-gray-light);
            text-align: center;
            padding: 30px 20px;
            font-family: var(--font-display);
            font-size: 0.9rem;
        }

        /* ==================== ARCHITECTURE DIAGRAM ==================== */
        .arch-diagram {
            background: var(--rh-gray-lighter);
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
        }

        .arch-layers {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 500px;
            margin: 0 auto;
        }

        .arch-layer {
            padding: 20px;
            border-radius: var(--radius-md);
            text-align: center;
            font-family: var(--font-display);
            font-weight: 600;
            color: var(--rh-white);
        }

        .layer-app {
            background: var(--rh-red);
        }

        .layer-runtime {
            background: var(--rh-blue);
        }

        .layer-bubblewrap {
            background: var(--rh-purple);
        }

        .layer-host {
            background: var(--rh-gray-dark);
        }

        .arch-arrow {
            text-align: center;
            font-size: 1.5rem;
            color: var(--rh-gray);
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 768px) {
            .section-header {
                flex-direction: column;
                text-align: center;
            }
            
            .nav-container {
                gap: 5px;
            }
            
            .nav-btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .identifier-visual {
                font-size: 1rem;
            }
            
            .id-part {
                padding: 8px 10px;
                min-width: 50px;
            }
            
            .flow-diagram {
                flex-direction: column;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }

            .tab-btn {
                padding: 10px 15px;
                font-size: 0.85rem;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header class="main-header" role="banner">
        <div class="header-content">
            <span class="course-badge">RH124 ‚Ä¢ CHAPTER 13</span>
            <h1>Installing and Updating Software with Flatpak</h1>
            <p class="chapter-subtitle">Master sandboxed application management using Flatpak on Red Hat Enterprise Linux</p>
        </div>
    </header>

    <!-- Section Navigation -->
    <nav class="section-nav" role="navigation" aria-label="Chapter sections">
        <div class="nav-container">
            <a href="#section-objectives" class="nav-btn">Objectives</a>
            <a href="#section-overview" class="nav-btn">Overview</a>
            <a href="#section-architecture" class="nav-btn">Architecture</a>
            <a href="#section-remotes" class="nav-btn">Remotes</a>
            <a href="#section-managing" class="nav-btn">Managing Apps</a>
            <a href="#section-permissions" class="nav-btn">Permissions</a>
            <a href="#section-quiz" class="nav-btn">Quiz</a>
            <a href="#section-lab" class="nav-btn">Lab</a>
            <a href="#section-summary" class="nav-btn">Summary</a>
        </div>
    </nav>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-inner">
            <div class="progress-label">
                <span>Chapter Progress</span>
                <span id="progress-percent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content" id="main-content">
        
        <!-- Section 1: Learning Objectives -->
        <section id="section-objectives" class="content-section" aria-labelledby="objectives-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">1</span>
                <h2 id="objectives-heading">Learning Objectives</h2>
            </div>
            <div class="section-body">
                <div class="objectives-box">
                    <h3>After completing this chapter, you will be able to:</h3>
                    <ul class="objectives-list">
                        <li>Describe the <span class="tooltip-container"><button type="button" class="tooltip-trigger" aria-describedby="tooltip-flatpak">Flatpak</button><span class="tooltip-content" id="tooltip-flatpak" role="tooltip">A next-generation packaging format that provides sandboxed applications with bundled dependencies, enabling distribution-agnostic software deployment.</span></span> application packaging format and its benefits</li>
                        <li>Install, update, and remove Flatpak applications using the <code class="inline">flatpak</code> command</li>
                        <li>Configure and manage Flatpak <span class="tooltip-container"><button type="button" class="tooltip-trigger" aria-describedby="tooltip-remote">remote repositories</button><span class="tooltip-content" id="tooltip-remote" role="tooltip">A remote is a repository that hosts Flatpak applications and runtimes. Red Hat provides its own remote, and third-party remotes like Flathub offer additional applications.</span></span></li>
                        <li>Understand Flatpak <span class="tooltip-container"><button type="button" class="tooltip-trigger" aria-describedby="tooltip-runtime">runtimes</button><span class="tooltip-content" id="tooltip-runtime" role="tooltip">A runtime provides the shared libraries and basic files that an application needs to run. Multiple applications can share the same runtime, reducing disk space usage.</span></span> and application identifiers</li>
                        <li>Work with Flatpak <span class="tooltip-container"><button type="button" class="tooltip-trigger" aria-describedby="tooltip-sandbox">sandboxing</button><span class="tooltip-content" id="tooltip-sandbox" role="tooltip">Sandboxing isolates applications from the host system and each other, restricting their access to system resources unless explicitly granted permission.</span></span> and permissions</li>
                        <li>Compare RPM-based and Flatpak package management approaches</li>
                    </ul>
                </div>

                <div class="key-points">
                    <h4>Why This Chapter Matters</h4>
                    <p>Flatpak represents a modern approach to Linux application packaging that complements traditional RPM-based package management. Understanding both methods allows administrators to choose the best deployment strategy for different applications while maintaining system security through sandboxing.</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Understanding Flatpak -->
        <section id="section-overview" class="content-section" aria-labelledby="overview-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">2</span>
                <h2 id="overview-heading">Understanding Flatpak</h2>
            </div>
            <div class="section-body">
                <p><span class="tooltip-container"><button type="button" class="tooltip-trigger" aria-describedby="tooltip-flatpak2">Flatpak</button><span class="tooltip-content" id="tooltip-flatpak2" role="tooltip">Flatpak is a system for building, distributing, and running sandboxed desktop applications on Linux. It was originally called xdg-app.</span></span> is a framework for distributing desktop applications across Linux distributions. Unlike traditional package managers like DNF that install software directly into the system, Flatpak runs applications in isolated sandboxes with controlled access to system resources.</p>

                <h3>Flatpak vs. Traditional Package Management</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>RPM/DNF</th>
                            <th>Flatpak</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Dependencies</td>
                            <td>Shared system libraries</td>
                            <td>Bundled or runtime-provided</td>
                        </tr>
                        <tr>
                            <td>Isolation</td>
                            <td>None (full system access)</td>
                            <td>Sandboxed with permission controls</td>
                        </tr>
                        <tr>
                            <td>Distribution</td>
                            <td>Distribution-specific packages</td>
                            <td>Distribution-agnostic</td>
                        </tr>
                        <tr>
                            <td>Updates</td>
                            <td>Centralized with OS updates</td>
                            <td>Independent of OS updates</td>
                        </tr>
                        <tr>
                            <td>Best For</td>
                            <td>System utilities, libraries, servers</td>
                            <td>Desktop applications</td>
                        </tr>
                        <tr>
                            <td>Installation Scope</td>
                            <td>System-wide only</td>
                            <td>System-wide or per-user</td>
                        </tr>
                    </tbody>
                </table>

                <div class="card-grid">
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üì¶</span> Self-Contained</h4>
                        <p>Applications include all dependencies or share common runtimes, eliminating library conflicts.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üîí</span> Sandboxed</h4>
                        <p>Applications run isolated from the system using <span class="tooltip-container"><button type="button" class="tooltip-trigger" aria-describedby="tooltip-bubblewrap">bubblewrap</button><span class="tooltip-content" id="tooltip-bubblewrap" role="tooltip">Bubblewrap is an unprivileged sandboxing tool used by Flatpak to create secure containers for running applications with limited system access.</span></span> for security.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üîÑ</span> Deduplication</h4>
                        <p>Shared runtimes and content-addressed storage reduce disk space usage across applications.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üåê</span> Universal</h4>
                        <p>Applications work across multiple Linux distributions without modification.</p>
                    </div>
                </div>

                <div class="note-box">
                    <div class="note-box-header">
                        <span class="note-icon">üí°</span>
                        <span>When to Use Flatpak</span>
                    </div>
                    <p>Flatpak is ideal for desktop applications like web browsers, office suites, media players, and communication tools. For system services, command-line utilities, and libraries, continue using RPM packages through DNF.</p>
                </div>

                <h3>Installation Scopes</h3>
                <p>Flatpak supports two installation scopes:</p>
                
                <div class="expandable">
                    <button class="expandable-header" aria-expanded="false" aria-controls="scope-content">
                        <span>System-wide vs. User Installation</span>
                        <span class="expand-icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div id="scope-content" class="expandable-content">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Scope</th>
                                    <th>Location</th>
                                    <th>Permission Required</th>
                                    <th>Available To</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>System</strong></td>
                                    <td><code class="inline">/var/lib/flatpak</code></td>
                                    <td>Root (sudo)</td>
                                    <td>All users</td>
                                </tr>
                                <tr>
                                    <td><strong>User</strong></td>
                                    <td><code class="inline">~/.local/share/flatpak</code></td>
                                    <td>None</td>
                                    <td>Current user only</td>
                                </tr>
                            </tbody>
                        </table>
                        <p>Use the <code class="inline">--user</code> flag for user-scope installations or <code class="inline">--system</code> (default) for system-wide installations.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Flatpak Architecture -->
        <section id="section-architecture" class="content-section" aria-labelledby="arch-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">3</span>
                <h2 id="arch-heading">Flatpak Architecture</h2>
            </div>
            <div class="section-body">
                <p>Understanding Flatpak's architecture helps you manage applications effectively. The system consists of applications, runtimes, and a sandboxing layer.</p>

                <h3>Architecture Layers</h3>
                <div class="arch-diagram">
                    <div class="arch-layers">
                        <div class="arch-layer layer-app">Flatpak Application</div>
                        <div class="arch-arrow">‚Üì</div>
                        <div class="arch-layer layer-runtime">Runtime (Shared Libraries)</div>
                        <div class="arch-arrow">‚Üì</div>
                        <div class="arch-layer layer-bubblewrap">Bubblewrap Sandbox</div>
                        <div class="arch-arrow">‚Üì</div>
                        <div class="arch-layer layer-host">Host System (RHEL)</div>
                    </div>
                </div>

                <h3>Flatpak Identifiers</h3>
                <p>Flatpak applications and runtimes use unique identifiers that follow a reverse-DNS naming convention. This three-part identifier enables organizations to publish many applications with a shared prefix.</p>

                <div class="identifier-diagram">
                    <div class="identifier-diagram-title">Application Identifier Structure</div>
                    <div class="identifier-visual">
                        <span class="id-part id-domain">org</span>
                        <span class="id-sep">.</span>
                        <span class="id-part id-org">mozilla</span>
                        <span class="id-sep">.</span>
                        <span class="id-part id-app">firefox</span>
                    </div>
                    <div class="identifier-labels">
                        <div class="id-label">
                            <span class="id-label-color" style="background: var(--rh-blue);"></span>
                            <span>Domain</span>
                        </div>
                        <div class="id-label">
                            <span class="id-label-color" style="background: var(--rh-green);"></span>
                            <span>Organization</span>
                        </div>
                        <div class="id-label">
                            <span class="id-label-color" style="background: var(--rh-red);"></span>
                            <span>Application</span>
                        </div>
                    </div>
                </div>

                <p>You can reference applications using either the full identifier (<code class="inline">org.mozilla.firefox</code>) or the short name (<code class="inline">firefox</code>) if it's unique.</p>

                <h3>Identifier Triples</h3>
                <p>For advanced operations, you can specify architecture and branch using an identifier triple:</p>
                
                <div class="code-block">
                    <span class="code-title">Identifier Triple Format</span>
                    <code><span class="code-comment"># Format: ID/ARCH/BRANCH</span>
<span class="code-output">org.mozilla.firefox/x86_64/stable</span>

<span class="code-comment"># Specify only architecture</span>
<span class="code-output">org.mozilla.firefox/x86_64//</span>

<span class="code-comment"># Specify only branch</span>
<span class="code-output">org.mozilla.firefox//stable</span></code>
                </div>

                <h3>Runtimes</h3>
                <p>A <span class="tooltip-container"><button type="button" class="tooltip-trigger" aria-describedby="tooltip-runtime2">runtime</button><span class="tooltip-content" id="tooltip-runtime2" role="tooltip">Runtimes contain the fundamental components that applications need, like system libraries, language interpreters, and common frameworks.</span></span> provides the basic dependencies that applications need. Common runtimes include:</p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Runtime</th>
                            <th>Description</th>
                            <th>Provider</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline">com.redhat.Platform</code></td>
                            <td>Red Hat's official runtime for RHEL</td>
                            <td>Red Hat</td>
                        </tr>
                        <tr>
                            <td><code class="inline">org.freedesktop.Platform</code></td>
                            <td>Basic runtime with common libraries</td>
                            <td>Freedesktop.org</td>
                        </tr>
                        <tr>
                            <td><code class="inline">org.gnome.Platform</code></td>
                            <td>GNOME desktop runtime with GTK</td>
                            <td>GNOME Project</td>
                        </tr>
                        <tr>
                            <td><code class="inline">org.kde.Platform</code></td>
                            <td>KDE desktop runtime with Qt</td>
                            <td>KDE Project</td>
                        </tr>
                    </tbody>
                </table>

                <div class="info-box">
                    <div class="info-box-header">
                        <span class="note-icon">‚ÑπÔ∏è</span>
                        <span>Runtime Sharing</span>
                    </div>
                    <p>When multiple applications require the same runtime, Flatpak downloads it only once. Subsequent installations that need the same runtime reuse the existing copy, saving bandwidth and disk space.</p>
                </div>
            </div>
        </section>

        <!-- Section 4: Managing Remote Repositories -->
        <section id="section-remotes" class="content-section" aria-labelledby="remotes-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">4</span>
                <h2 id="remotes-heading">Managing Remote Repositories</h2>
            </div>
            <div class="section-body">
                <p>Flatpak applications and runtimes are distributed through repositories called <span class="tooltip-container"><button type="button" class="tooltip-trigger" aria-describedby="tooltip-remotes">remotes</button><span class="tooltip-content" id="tooltip-remotes" role="tooltip">A remote is a source location where Flatpak can download applications and runtimes. Each remote has a name and URL that Flatpak uses to fetch content.</span></span>. Red Hat packages several open-source applications in its remote repository.</p>

                <h3>Available Remotes</h3>
                <div class="card-grid">
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üé©</span> Red Hat Remote</h4>
                        <p>Official repository with Red Hat-supported applications. Enabled by default on RHEL systems.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üåê</span> Flathub</h4>
                        <p>Largest third-party repository at flathub.org. Red Hat does not support these applications.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üêß</span> Fedora Remote</h4>
                        <p>Fedora Project's Flatpak repository with community-maintained applications.</p>
                    </div>
                </div>

                <div class="warning-box">
                    <div class="warning-box-header">
                        <span class="note-icon" aria-hidden="true">‚ö†Ô∏è</span>
                        <span>Support Notice</span>
                    </div>
                    <p>Red Hat does not support applications from third-party remote repositories like Flathub. Use only the Red Hat remote for production environments requiring support coverage.</p>
                </div>

                <h3>Remote Management Commands</h3>
                <div class="tabs-container">
                    <div class="tab-list" role="tablist" aria-label="Remote management commands">
                        <button class="tab-btn" role="tab" aria-selected="true" aria-controls="tab-list-remotes" id="tab-btn-list">List</button>
                        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-add-remote" id="tab-btn-add">Add</button>
                        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-modify-remote" id="tab-btn-modify">Modify</button>
                        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-delete-remote" id="tab-btn-delete">Delete</button>
                    </div>

                    <div id="tab-list-remotes" class="tab-content active" role="tabpanel" aria-labelledby="tab-btn-list">
                        <h4>Listing Configured Remotes</h4>
                        <p>View all configured remotes using <code class="inline">flatpak remotes</code>:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># List all remotes</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remotes</span>
<span class="code-output">Name          Options</span>
<span class="code-output">rhel          system</span>
<span class="code-output">flathub       system</span>

<span class="code-comment"># Show detailed information</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remotes --show-details</span>
<span class="code-output">Name     Title        URL                                Priority Options</span>
<span class="code-output">rhel     Red Hat      oci+https://cdn.redhat.com/...     1        system</span>
<span class="code-output">flathub  Flathub      https://dl.flathub.org/repo/       1        system</span></code>
                        </div>
                    </div>

                    <div id="tab-add-remote" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-add">
                        <h4>Adding a Remote</h4>
                        <p>Add new remotes using <code class="inline">flatpak remote-add</code>:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Add Flathub remote (system-wide)</span>
<span class="code-prompt">[root@host ~]#</span> <span class="code-command">flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo</span>

<span class="code-comment"># Add remote for current user only</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remote-add --user --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo</span>

<span class="code-comment"># Verify the remote was added</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remotes</span></code>
                        </div>
                    </div>

                    <div id="tab-modify-remote" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-modify">
                        <h4>Modifying a Remote</h4>
                        <p>Use <code class="inline">flatpak remote-modify</code> to change remote settings:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Disable a remote temporarily</span>
<span class="code-prompt">[root@host ~]#</span> <span class="code-command">flatpak remote-modify --disable flathub</span>

<span class="code-comment"># Re-enable a remote</span>
<span class="code-prompt">[root@host ~]#</span> <span class="code-command">flatpak remote-modify --enable flathub</span>

<span class="code-comment"># Change remote priority</span>
<span class="code-prompt">[root@host ~]#</span> <span class="code-command">flatpak remote-modify --prio=2 flathub</span></code>
                        </div>
                    </div>

                    <div id="tab-delete-remote" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-delete">
                        <h4>Removing a Remote</h4>
                        <p>Delete remotes using <code class="inline">flatpak remote-delete</code>:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Remove a remote (will fail if apps from it are installed)</span>
<span class="code-prompt">[root@host ~]#</span> <span class="code-command">flatpak remote-delete flathub</span>

<span class="code-comment"># Force remove even with installed apps</span>
<span class="code-prompt">[root@host ~]#</span> <span class="code-command">flatpak remote-delete --force flathub</span>

<span class="code-comment"># Remove user-scope remote</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remote-delete --user flathub</span></code>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Managing Flatpak Applications -->
        <section id="section-managing" class="content-section" aria-labelledby="managing-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">5</span>
                <h2 id="managing-heading">Managing Flatpak Applications</h2>
            </div>
            <div class="section-body">
                <p>The <code class="inline">flatpak</code> command provides subcommands to search, install, update, remove, and get information about applications. You can also use the GNOME Software graphical tool to manage Flatpak packages.</p>

                <h3>Essential Flatpak Commands</h3>
                <div class="tabs-container">
                    <div class="tab-list" role="tablist" aria-label="Flatpak command categories">
                        <button class="tab-btn" role="tab" aria-selected="true" aria-controls="tab-search" id="tab-btn-search">Search</button>
                        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-install" id="tab-btn-install">Install</button>
                        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-list" id="tab-btn-listapps">List</button>
                        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-update" id="tab-btn-update">Update</button>
                        <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-remove" id="tab-btn-remove">Remove</button>
                    </div>

                    <div id="tab-search" class="tab-content active" role="tabpanel" aria-labelledby="tab-btn-search">
                        <h4>Searching for Applications</h4>
                        <p>Use <code class="inline">flatpak search</code> to find available applications:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Search for applications by name</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak search firefox</span>
<span class="code-output">Name          Description                      Application ID           Version</span>
<span class="code-output">Firefox       Fast, Private & Safe Browser     org.mozilla.firefox      125.0</span>

<span class="code-comment"># Search with keywords</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak search "text editor"</span>

<span class="code-comment"># List all available applications from a remote</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remote-ls rhel --app</span></code>
                        </div>
                    </div>

                    <div id="tab-install" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-install">
                        <h4>Installing Applications</h4>
                        <p>Use <code class="inline">flatpak install</code> to download and install applications:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Install from any configured remote</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">sudo flatpak install firefox</span>

<span class="code-comment"># Install from a specific remote</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">sudo flatpak install rhel org.mozilla.firefox</span>

<span class="code-comment"># Install for current user only (no sudo needed)</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak install --user flathub org.gimp.GIMP</span>

<span class="code-comment"># Skip confirmation prompts</span>
<span class="code-prompt">[root@host ~]#</span> <span class="code-command">flatpak install -y rhel org.mozilla.firefox</span></code>
                        </div>
                        <p style="margin-top: 15px;">During installation, Flatpak automatically resolves and downloads required runtimes.</p>
                    </div>

                    <div id="tab-list" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-listapps">
                        <h4>Listing Installed Applications</h4>
                        <p>View installed applications using <code class="inline">flatpak list</code>:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># List installed applications</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak list --app</span>
<span class="code-output">Name                     Application ID              Version   Branch   Origin</span>
<span class="code-output">Firefox                  org.mozilla.firefox         125.0     stable   rhel</span>
<span class="code-output">LibreOffice              org.libreoffice.LibreOffice 24.2     stable   flathub</span>

<span class="code-comment"># List installed runtimes</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak list --runtime</span>

<span class="code-comment"># List all (apps and runtimes)</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak list</span>

<span class="code-comment"># Show detailed information</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak list --columns=name,application,version,size</span></code>
                        </div>
                    </div>

                    <div id="tab-update" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-update">
                        <h4>Updating Applications</h4>
                        <p>Keep applications current with <code class="inline">flatpak update</code>:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Update all installed applications and runtimes</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">sudo flatpak update</span>

<span class="code-comment"># Update a specific application</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">sudo flatpak update org.mozilla.firefox</span>

<span class="code-comment"># Update user-installed applications</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak update --user</span>

<span class="code-comment"># Check for updates without installing</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remote-ls --updates</span></code>
                        </div>
                        <div class="note-box">
                            <div class="note-box-header">
                                <span class="note-icon">üí°</span>
                                <span>Update Branches</span>
                            </div>
                            <p>The <code class="inline">flatpak update</code> command checks for updates within the same branch from which the application was installed. If a newer version exists in a different branch, Flatpak will not automatically detect it.</p>
                        </div>
                    </div>

                    <div id="tab-remove" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-remove">
                        <h4>Removing Applications</h4>
                        <p>Uninstall applications with <code class="inline">flatpak uninstall</code>:</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Remove an application</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">sudo flatpak uninstall org.mozilla.firefox</span>

<span class="code-comment"># Remove and delete application data</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">sudo flatpak uninstall --delete-data org.mozilla.firefox</span>

<span class="code-comment"># Remove unused runtimes and extensions</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">sudo flatpak uninstall --unused</span>

<span class="code-comment"># Remove user-installed application</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak uninstall --user org.gimp.GIMP</span></code>
                        </div>
                    </div>
                </div>

                <h3>Getting Application Information</h3>
                <div class="code-block">
                    <span class="code-title">Application Details</span>
                    <code><span class="code-comment"># View application metadata</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak info org.mozilla.firefox</span>
<span class="code-output">Firefox - Fast, Private & Safe Web Browser</span>
<span class="code-output"></span>
<span class="code-output">          ID: org.mozilla.firefox</span>
<span class="code-output">         Ref: app/org.mozilla.firefox/x86_64/stable</span>
<span class="code-output">        Arch: x86_64</span>
<span class="code-output">      Branch: stable</span>
<span class="code-output">     Version: 125.0</span>
<span class="code-output">     License: MPL-2.0</span>
<span class="code-output">      Origin: rhel</span>
<span class="code-output">     Runtime: com.redhat.Platform/x86_64/el10</span>
<span class="code-output">         Sdk: com.redhat.Sdk/x86_64/el10</span>
<span class="code-output">Install size: 234.2 MB</span>

<span class="code-comment"># Show permissions</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak info --show-permissions org.mozilla.firefox</span></code>
                </div>

                <h3>Running Applications</h3>
                <div class="code-block">
                    <code><span class="code-comment"># Run an application from command line</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak run org.mozilla.firefox</span>

<span class="code-comment"># Run with a specific command</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak run --command=bash org.mozilla.firefox</span>

<span class="code-comment"># Applications also appear in the GNOME application menu</span></code>
                </div>
            </div>
        </section>

        <!-- Section 6: Permissions and Sandboxing -->
        <section id="section-permissions" class="content-section" aria-labelledby="permissions-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">6</span>
                <h2 id="permissions-heading">Permissions and Sandboxing</h2>
            </div>
            <div class="section-body">
                <p>Flatpak applications run in sandboxes with limited access to the host system. Applications must explicitly request permissions to access resources like the network, files, or hardware devices.</p>

                <h3>Understanding Sandbox Permissions</h3>
                <p>Each Flatpak application declares the permissions it requires. These permissions are grouped into categories:</p>

                <div class="card-grid">
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üìÅ</span> Filesystem Access</h4>
                        <p>Access to home directory, host filesystem, or specific paths like Downloads folder.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üåê</span> Network Access</h4>
                        <p>Permission to make network connections for downloading content or communication.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üé§</span> Device Access</h4>
                        <p>Access to audio, video, webcam, and other hardware devices.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üñ•Ô∏è</span> Display Access</h4>
                        <p>Wayland or X11 display server access for graphical interface.</p>
                    </div>
                </div>

                <h3>Viewing Permissions</h3>
                <div class="code-block">
                    <code><span class="code-comment"># View application permissions</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak info --show-permissions org.mozilla.firefox</span>
<span class="code-output">[Context]</span>
<span class="code-output">shared=network;ipc;</span>
<span class="code-output">sockets=x11;wayland;pulseaudio;</span>
<span class="code-output">devices=dri;</span>
<span class="code-output">filesystems=xdg-download;</span>

<span class="code-comment"># List permissions for all installed apps</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak permission-list</span></code>
                </div>

                <h3>Overriding Permissions</h3>
                <p>You can customize application permissions using <code class="inline">flatpak override</code>:</p>

                <div class="code-block">
                    <span class="code-title">Permission Overrides</span>
                    <code><span class="code-comment"># Grant access to additional directory</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak override --user --filesystem=/media org.mozilla.firefox</span>

<span class="code-comment"># Revoke network access</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak override --user --unshare=network org.example.App</span>

<span class="code-comment"># View current overrides</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak override --show org.mozilla.firefox</span>

<span class="code-comment"># Reset all overrides to defaults</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak override --reset org.mozilla.firefox</span></code>
                </div>

                <div class="warning-box">
                    <div class="warning-box-header">
                        <span class="note-icon" aria-hidden="true">‚ö†Ô∏è</span>
                        <span>Security Consideration</span>
                    </div>
                    <p>Be cautious when granting additional permissions. The sandbox provides security isolation‚Äîgranting excessive permissions like <code class="inline">--filesystem=host</code> significantly reduces this protection.</p>
                </div>

                <h3>Common Permission Flags</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Flag</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline">--filesystem=home</code></td>
                            <td>Full access to home directory</td>
                        </tr>
                        <tr>
                            <td><code class="inline">--filesystem=host</code></td>
                            <td>Full access to host filesystem (use with caution)</td>
                        </tr>
                        <tr>
                            <td><code class="inline">--share=network</code></td>
                            <td>Enable network access</td>
                        </tr>
                        <tr>
                            <td><code class="inline">--socket=pulseaudio</code></td>
                            <td>Access to audio system</td>
                        </tr>
                        <tr>
                            <td><code class="inline">--device=dri</code></td>
                            <td>Access to GPU for graphics acceleration</td>
                        </tr>
                        <tr>
                            <td><code class="inline">--talk-name=org.freedesktop.Notifications</code></td>
                            <td>Allow sending desktop notifications</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Application Data Storage</h3>
                <p>Flatpak stores application data in isolated directories:</p>
                <div class="code-block">
                    <code><span class="code-comment"># Application data location</span>
<span class="code-output">~/.var/app/org.mozilla.firefox/</span>
<span class="code-output">‚îú‚îÄ‚îÄ cache/      # Cached data</span>
<span class="code-output">‚îú‚îÄ‚îÄ config/     # Configuration files</span>
<span class="code-output">‚îî‚îÄ‚îÄ data/       # Application data</span></code>
                </div>
            </div>
        </section>

        <!-- Section 7: Quiz -->
        <section id="section-quiz" class="content-section" aria-labelledby="quiz-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">7</span>
                <h2 id="quiz-heading">Knowledge Check</h2>
            </div>
            <div class="section-body">
                <div class="quiz-container" role="region" aria-label="Chapter quiz">
                    <div class="quiz-header">
                        <h3 class="quiz-title">Test Your Understanding</h3>
                        <span class="quiz-score" id="quiz-score">Score: 0/5</span>
                    </div>

                    <!-- Question 1 -->
                    <div class="quiz-question" data-question="1" data-correct="b">
                        <p class="question-text"><span class="question-number">Q1</span> What is a Flatpak runtime?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="a">
                                <span>A service that manages Flatpak installations</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="b">
                                <span>A collection of shared libraries and files that applications depend on</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="c">
                                <span>A graphical tool for managing Flatpak applications</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="d">
                                <span>A daemon that runs Flatpak applications in the background</span>
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-1"></div>
                    </div>

                    <!-- Question 2 -->
                    <div class="quiz-question" data-question="2" data-correct="c">
                        <p class="question-text"><span class="question-number">Q2</span> Which command installs a Flatpak application for the current user only?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="a">
                                <span><code class="inline">sudo flatpak install --local firefox</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="b">
                                <span><code class="inline">flatpak install --system firefox</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="c">
                                <span><code class="inline">flatpak install --user firefox</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="d">
                                <span><code class="inline">flatpak install --home firefox</code></span>
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-2"></div>
                    </div>

                    <!-- Question 3 -->
                    <div class="quiz-question" data-question="3" data-correct="a">
                        <p class="question-text"><span class="question-number">Q3</span> What format does a Flatpak application identifier follow?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="q3" value="a">
                                <span>Reverse-DNS notation (e.g., org.mozilla.firefox)</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q3" value="b">
                                <span>Package name with version (e.g., firefox-125.0)</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q3" value="c">
                                <span>URL format (e.g., https://mozilla.org/firefox)</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q3" value="d">
                                <span>UUID format (e.g., 550e8400-e29b-41d4-a716-446655440000)</span>
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-3"></div>
                    </div>

                    <!-- Question 4 -->
                    <div class="quiz-question" data-question="4" data-correct="d">
                        <p class="question-text"><span class="question-number">Q4</span> Where does Flatpak store application data for a user?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="q4" value="a">
                                <span><code class="inline">/var/lib/flatpak/app-data/</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q4" value="b">
                                <span><code class="inline">~/.flatpak/data/</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q4" value="c">
                                <span><code class="inline">~/.config/flatpak/</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q4" value="d">
                                <span><code class="inline">~/.var/app/</code></span>
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-4"></div>
                    </div>

                    <!-- Question 5 -->
                    <div class="quiz-question" data-question="5" data-correct="b">
                        <p class="question-text"><span class="question-number">Q5</span> Which command removes unused runtimes and extensions?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="q5" value="a">
                                <span><code class="inline">flatpak cleanup --runtimes</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q5" value="b">
                                <span><code class="inline">flatpak uninstall --unused</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q5" value="c">
                                <span><code class="inline">flatpak remove --orphans</code></span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q5" value="d">
                                <span><code class="inline">flatpak gc --all</code></span>
                            </label>
                        </div>
                        <div class="quiz-feedback" id="feedback-5"></div>
                    </div>

                    <button class="quiz-btn" id="check-answers" type="button">Check Answers</button>
                    <button class="quiz-btn" id="reset-quiz" type="button" style="display: none; background: var(--rh-gray);">Reset Quiz</button>
                </div>
            </div>
        </section>

        <!-- Section 8: Hands-on Lab -->
        <section id="section-lab" class="content-section" aria-labelledby="lab-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">8</span>
                <h2 id="lab-heading">Hands-on Lab</h2>
            </div>
            <div class="section-body">
                <div class="lab-container">
                    <div class="lab-header">
                        <span class="lab-icon" aria-hidden="true">üî¨</span>
                        <h3 class="lab-title">Lab: Managing Applications with Flatpak</h3>
                    </div>

                    <p><strong>Objective:</strong> Practice installing, configuring, and managing Flatpak applications on RHEL 10.</p>

                    <div class="lab-step">
                        <h4>Task 1: Explore Configured Remotes</h4>
                        <p>View and understand the configured Flatpak remotes on your system.</p>
                        <div class="code-block">
                            <code><span class="code-comment"># List configured remotes</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remotes</span>

<span class="code-comment"># Show detailed remote information</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remotes --show-details</span>

<span class="code-comment"># List available applications from the rhel remote</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remote-ls rhel --app</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <h4>Task 2: Search and Install an Application</h4>
                        <p>Find and install a Flatpak application.</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Search for an application</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak search calculator</span>

<span class="code-comment"># View application details before installing</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remote-info rhel org.gnome.Calculator</span>

<span class="code-comment"># Install the application (user scope)</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak install --user rhel org.gnome.Calculator</span>

<span class="code-comment"># Verify installation</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak list --app</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <h4>Task 3: Examine Application Information</h4>
                        <p>Explore the installed application's metadata and permissions.</p>
                        <div class="code-block">
                            <code><span class="code-comment"># View application information</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak info org.gnome.Calculator</span>

<span class="code-comment"># Show application permissions</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak info --show-permissions org.gnome.Calculator</span>

<span class="code-comment"># View the runtime used by the application</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak info org.gnome.Calculator | grep Runtime</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <h4>Task 4: Run and Test the Application</h4>
                        <p>Launch the application and verify it works correctly.</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Run the application from command line</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak run org.gnome.Calculator</span>

<span class="code-comment"># The application should also appear in the GNOME application menu</span>
<span class="code-comment"># Press the Super key and search for "Calculator"</span></code>
                        </div>
                    </div>

                    <div class="lab-step">
                        <h4>Task 5: Update and Clean Up</h4>
                        <p>Update applications and remove unused components.</p>
                        <div class="code-block">
                            <code><span class="code-comment"># Check for available updates</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak remote-ls --updates</span>

<span class="code-comment"># Update all user-installed applications</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak update --user</span>

<span class="code-comment"># Uninstall the test application</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak uninstall --user org.gnome.Calculator</span>

<span class="code-comment"># Remove unused runtimes</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak uninstall --unused --user</span>

<span class="code-comment"># Verify cleanup</span>
<span class="code-prompt">[student@workstation ~]$</span> <span class="code-command">flatpak list --user</span></code>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 9: Summary -->
        <section id="section-summary" class="content-section" aria-labelledby="summary-heading">
            <div class="section-header">
                <span class="section-number" aria-hidden="true">9</span>
                <h2 id="summary-heading">Chapter Summary</h2>
            </div>
            <div class="section-body">
                <div class="card-grid">
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üì¶</span> Flatpak Basics</h4>
                        <p>Flatpak provides sandboxed, distribution-agnostic application packaging with bundled dependencies and controlled system access.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üåê</span> Remote Repositories</h4>
                        <p>Use <code class="inline">flatpak remotes</code>, <code class="inline">remote-add</code>, and <code class="inline">remote-delete</code> to manage application sources. Red Hat remote is supported; third-party remotes are not.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üîß</span> Application Management</h4>
                        <p>Use <code class="inline">flatpak search</code>, <code class="inline">install</code>, <code class="inline">update</code>, <code class="inline">uninstall</code>, and <code class="inline">list</code> to manage applications and runtimes.</p>
                    </div>
                    <div class="info-card" tabindex="0">
                        <h4><span class="card-icon">üîí</span> Permissions</h4>
                        <p>Flatpak sandboxing limits application access. Use <code class="inline">flatpak override</code> to customize permissions when needed.</p>
                    </div>
                </div>

                <h3>Command Quick Reference</h3>
                <div class="expandable">
                    <button class="expandable-header" aria-expanded="false" aria-controls="cmd-reference">
                        <span>Essential Flatpak Commands</span>
                        <span class="expand-icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div id="cmd-reference" class="expandable-content">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Task</th>
                                    <th>Command</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>List remotes</td>
                                    <td><code class="inline">flatpak remotes</code></td>
                                </tr>
                                <tr>
                                    <td>Add a remote</td>
                                    <td><code class="inline">flatpak remote-add name URL</code></td>
                                </tr>
                                <tr>
                                    <td>Search applications</td>
                                    <td><code class="inline">flatpak search keyword</code></td>
                                </tr>
                                <tr>
                                    <td>Install application</td>
                                    <td><code class="inline">flatpak install remote app-id</code></td>
                                </tr>
                                <tr>
                                    <td>List installed</td>
                                    <td><code class="inline">flatpak list --app</code></td>
                                </tr>
                                <tr>
                                    <td>Update all</td>
                                    <td><code class="inline">flatpak update</code></td>
                                </tr>
                                <tr>
                                    <td>Uninstall application</td>
                                    <td><code class="inline">flatpak uninstall app-id</code></td>
                                </tr>
                                <tr>
                                    <td>Remove unused</td>
                                    <td><code class="inline">flatpak uninstall --unused</code></td>
                                </tr>
                                <tr>
                                    <td>View app info</td>
                                    <td><code class="inline">flatpak info app-id</code></td>
                                </tr>
                                <tr>
                                    <td>Run application</td>
                                    <td><code class="inline">flatpak run app-id</code></td>
                                </tr>
                                <tr>
                                    <td>Override permissions</td>
                                    <td><code class="inline">flatpak override --user FLAGS app-id</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="key-points">
                    <h4>What's Next?</h4>
                    <p>In Chapter 14, you'll learn about accessing removable media, including:</p>
                    <ul>
                        <li>Mounting and unmounting external storage devices</li>
                        <li>Working with USB drives and optical media</li>
                        <li>Understanding mount points and device files</li>
                        <li>Managing removable media with udisks2</li>
                    </ul>
                </div>

                <div class="completion-section">
                    <h2>üéâ Chapter 13 Complete!</h2>
                    <p>You've learned how to install and manage sandboxed applications using Flatpak on Red Hat Enterprise Linux.</p>
                    <button class="completion-btn" id="mark-complete" type="button">Mark Chapter as Complete</button>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="main-footer" role="contentinfo">
        <p>RH124: Red Hat System Administration I ‚Ä¢ Chapter 13 ‚Ä¢ Version 10.0</p>
        <p style="margin-top: 10px; font-size: 0.8rem;">¬© Red Hat, Inc. All rights reserved. Red Hat and the Red Hat logo are trademarks of Red Hat, Inc.</p>
    </footer>

    <!-- JavaScript -->
    <script>
        (function() {
            'use strict';

            // ==================== PROGRESS TRACKING ====================
            const sections = document.querySelectorAll('.content-section');
            const progressFill = document.getElementById('progress-fill');
            const progressPercent = document.getElementById('progress-percent');
            const navBtns = document.querySelectorAll('.nav-btn');
            const visitedSections = new Set();

            function updateProgress() {
                const progress = (visitedSections.size / sections.length) * 100;
                progressFill.style.width = progress + '%';
                progressFill.setAttribute('aria-valuenow', Math.round(progress));
                progressPercent.textContent = Math.round(progress) + '%';

                navBtns.forEach(btn => {
                    const href = btn.getAttribute('href');
                    if (href && visitedSections.has(href.substring(1))) {
                        btn.classList.add('visited');
                    }
                });
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        visitedSections.add(entry.target.id);
                        updateProgress();

                        navBtns.forEach(btn => {
                            btn.classList.remove('active');
                            if (btn.getAttribute('href') === '#' + entry.target.id) {
                                btn.classList.add('active');
                            }
                        });
                    }
                });
            }, { threshold: 0.3 });

            sections.forEach(section => observer.observe(section));

            // ==================== TABS ====================
            const tabContainers = document.querySelectorAll('.tabs-container');
            
            tabContainers.forEach(container => {
                const tabs = container.querySelectorAll('.tab-btn');
                const panels = container.querySelectorAll('.tab-content');

                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
                        panels.forEach(p => p.classList.remove('active'));

                        tab.setAttribute('aria-selected', 'true');
                        const panelId = tab.getAttribute('aria-controls');
                        document.getElementById(panelId).classList.add('active');
                    });

                    tab.addEventListener('keydown', (e) => {
                        const currentIndex = Array.from(tabs).indexOf(tab);
                        
                        if (e.key === 'ArrowRight') {
                            e.preventDefault();
                            const nextIndex = (currentIndex + 1) % tabs.length;
                            tabs[nextIndex].focus();
                            tabs[nextIndex].click();
                        } else if (e.key === 'ArrowLeft') {
                            e.preventDefault();
                            const prevIndex = (currentIndex - 1 + tabs.length) % tabs.length;
                            tabs[prevIndex].focus();
                            tabs[prevIndex].click();
                        }
                    });
                });
            });

            // ==================== EXPANDABLE SECTIONS ====================
            const expandableHeaders = document.querySelectorAll('.expandable-header');

            expandableHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const expanded = header.getAttribute('aria-expanded') === 'true';
                    header.setAttribute('aria-expanded', !expanded);
                    
                    const content = header.nextElementSibling;
                    content.classList.toggle('show');
                });
            });

            // ==================== QUIZ FUNCTIONALITY ====================
            const checkAnswersBtn = document.getElementById('check-answers');
            const resetQuizBtn = document.getElementById('reset-quiz');
            const quizQuestions = document.querySelectorAll('.quiz-question');
            const quizScore = document.getElementById('quiz-score');

            const correctAnswers = {
                '1': {
                    answer: 'b',
                    explanation: 'A runtime provides the shared libraries and basic files that applications need to run. Multiple applications can share the same runtime.'
                },
                '2': {
                    answer: 'c',
                    explanation: 'The --user flag installs Flatpak applications in the user\'s home directory, making them available only to the current user without requiring root privileges.'
                },
                '3': {
                    answer: 'a',
                    explanation: 'Flatpak uses reverse-DNS notation (e.g., org.mozilla.firefox) to uniquely identify applications and prevent naming conflicts.'
                },
                '4': {
                    answer: 'd',
                    explanation: 'Flatpak stores application data in ~/.var/app/[application-id]/, keeping application data isolated and organized.'
                },
                '5': {
                    answer: 'b',
                    explanation: 'The flatpak uninstall --unused command removes runtimes and extensions that are no longer needed by any installed applications.'
                }
            };

            checkAnswersBtn.addEventListener('click', () => {
                let score = 0;

                quizQuestions.forEach(question => {
                    const qNum = question.getAttribute('data-question');
                    const selected = question.querySelector('input:checked');
                    const feedback = document.getElementById(`feedback-${qNum}`);
                    const options = question.querySelectorAll('.quiz-option');

                    options.forEach(opt => opt.classList.remove('correct', 'incorrect'));

                    if (selected) {
                        const parentLabel = selected.closest('.quiz-option');
                        if (selected.value === correctAnswers[qNum].answer) {
                            score++;
                            parentLabel.classList.add('correct');
                            feedback.className = 'quiz-feedback show correct';
                            feedback.innerHTML = '‚úì Correct! ' + correctAnswers[qNum].explanation;
                        } else {
                            parentLabel.classList.add('incorrect');
                            options.forEach(opt => {
                                if (opt.querySelector('input').value === correctAnswers[qNum].answer) {
                                    opt.classList.add('correct');
                                }
                            });
                            feedback.className = 'quiz-feedback show incorrect';
                            feedback.innerHTML = '‚úó Incorrect. ' + correctAnswers[qNum].explanation;
                        }
                    } else {
                        feedback.className = 'quiz-feedback show incorrect';
                        feedback.innerHTML = '‚ö† Please select an answer.';
                    }
                });

                quizScore.textContent = `Score: ${score}/5`;
                checkAnswersBtn.style.display = 'none';
                resetQuizBtn.style.display = 'inline-block';

                if (score === 5) {
                    localStorage.setItem('ch13-quiz-passed', 'true');
                }
            });

            resetQuizBtn.addEventListener('click', () => {
                quizQuestions.forEach(question => {
                    const qNum = question.getAttribute('data-question');
                    const feedback = document.getElementById(`feedback-${qNum}`);
                    const options = question.querySelectorAll('.quiz-option');
                    const inputs = question.querySelectorAll('input');

                    options.forEach(opt => opt.classList.remove('correct', 'incorrect'));
                    inputs.forEach(input => input.checked = false);
                    feedback.className = 'quiz-feedback';
                    feedback.innerHTML = '';
                });

                quizScore.textContent = 'Score: 0/5';
                checkAnswersBtn.style.display = 'inline-block';
                resetQuizBtn.style.display = 'none';
            });

            // ==================== COMPLETION BUTTON ====================
            const completeBtn = document.getElementById('mark-complete');
            if (completeBtn) {
                completeBtn.addEventListener('click', () => {
                    completeBtn.textContent = '‚úì Chapter Completed!';
                    completeBtn.style.background = '#267326';
                    completeBtn.disabled = true;

                    sections.forEach(section => {
                        visitedSections.add(section.id);
                    });
                    updateProgress();

                    localStorage.setItem('ch13-complete', 'true');

                    alert('Congratulations! You have completed Chapter 13: Installing and Updating Software with Flatpak. Continue to Chapter 14 to learn about accessing removable media.');
                });

                if (localStorage.getItem('ch13-complete') === 'true') {
                    completeBtn.textContent = '‚úì Chapter Completed!';
                    completeBtn.style.background = '#267326';
                    completeBtn.disabled = true;
                }
            }

            // ==================== TOOLTIP POSITIONING ====================
            const tooltipTriggers = document.querySelectorAll('.tooltip-trigger');

            tooltipTriggers.forEach(trigger => {
                trigger.addEventListener('mouseenter', positionTooltip);
                trigger.addEventListener('focus', positionTooltip);
            });

            function positionTooltip(e) {
                const trigger = e.target;
                const container = trigger.closest('.tooltip-container');
                const tooltip = container.querySelector('.tooltip-content');

                tooltip.classList.remove('tooltip-left', 'tooltip-right', 'tooltip-bottom');

                const rect = trigger.getBoundingClientRect();
                const tooltipRect = tooltip.getBoundingClientRect();

                if (rect.left + (rect.width / 2) - (tooltipRect.width / 2) < 10) {
                    tooltip.classList.add('tooltip-left');
                } else if (rect.right - (rect.width / 2) + (tooltipRect.width / 2) > window.innerWidth - 10) {
                    tooltip.classList.add('tooltip-right');
                }

                if (rect.top < tooltipRect.height + 20) {
                    tooltip.classList.add('tooltip-bottom');
                }
            }

            // ==================== SMOOTH SCROLLING ====================
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

        })();
    </script>
</body>
</html>
